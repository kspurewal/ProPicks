"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/feed/route";
exports.ids = ["app/api/feed/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffeed%2Froute&page=%2Fapi%2Ffeed%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffeed%2Froute.ts&appDir=%2FUsers%2Fkrishpurewal%2FDocuments%2FCode%2FProPicks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkrishpurewal%2FDocuments%2FCode%2FProPicks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffeed%2Froute&page=%2Fapi%2Ffeed%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffeed%2Froute.ts&appDir=%2FUsers%2Fkrishpurewal%2FDocuments%2FCode%2FProPicks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkrishpurewal%2FDocuments%2FCode%2FProPicks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_krishpurewal_Documents_Code_ProPicks_src_app_api_feed_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/feed/route.ts */ \"(rsc)/./src/app/api/feed/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/feed/route\",\n        pathname: \"/api/feed\",\n        filename: \"route\",\n        bundlePath: \"app/api/feed/route\"\n    },\n    resolvedPagePath: \"/Users/krishpurewal/Documents/Code/ProPicks/src/app/api/feed/route.ts\",\n    nextConfigOutput,\n    userland: _Users_krishpurewal_Documents_Code_ProPicks_src_app_api_feed_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/feed/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZmZWVkJTJGcm91dGUmcGFnZT0lMkZhcGklMkZmZWVkJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZmVlZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmtyaXNocHVyZXdhbCUyRkRvY3VtZW50cyUyRkNvZGUlMkZQcm9QaWNrcyUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZrcmlzaHB1cmV3YWwlMkZEb2N1bWVudHMlMkZDb2RlJTJGUHJvUGlja3MmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3FCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvcGlja3MvPzg2OTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2tyaXNocHVyZXdhbC9Eb2N1bWVudHMvQ29kZS9Qcm9QaWNrcy9zcmMvYXBwL2FwaS9mZWVkL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9mZWVkL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZmVlZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZmVlZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9rcmlzaHB1cmV3YWwvRG9jdW1lbnRzL0NvZGUvUHJvUGlja3Mvc3JjL2FwcC9hcGkvZmVlZC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZmVlZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffeed%2Froute&page=%2Fapi%2Ffeed%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffeed%2Froute.ts&appDir=%2FUsers%2Fkrishpurewal%2FDocuments%2FCode%2FProPicks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkrishpurewal%2FDocuments%2FCode%2FProPicks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/feed/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/feed/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_espn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/espn */ \"(rsc)/./src/lib/espn.ts\");\n/* harmony import */ var _lib_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/storage */ \"(rsc)/./src/lib/storage.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./src/lib/utils.ts\");\n\nconst dynamic = \"force-dynamic\";\n\n\n\n\n// --- Trending Pick ---\nasync function buildTrendingPick(games) {\n    const today = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.todayString)();\n    const picks = (0,_lib_storage__WEBPACK_IMPORTED_MODULE_2__.getPicksByDate)(today);\n    if (picks.length === 0) return null;\n    // Count picks per team\n    const teamCounts = {};\n    const gameCounts = {};\n    for (const pick of picks){\n        teamCounts[pick.pickedTeamId] = (teamCounts[pick.pickedTeamId] || 0) + 1;\n        gameCounts[pick.gameId] = (gameCounts[pick.gameId] || 0) + 1;\n    }\n    // Find team with most picks\n    let topTeamId = \"\";\n    let topCount = 0;\n    for (const [teamId, count] of Object.entries(teamCounts)){\n        if (count > topCount) {\n            topTeamId = teamId;\n            topCount = count;\n        }\n    }\n    if (!topTeamId) return null;\n    // Find the game for this team\n    const game = games.find((g)=>g.homeTeam.id === topTeamId || g.awayTeam.id === topTeamId);\n    if (!game) return null;\n    const isHome = game.homeTeam.id === topTeamId;\n    const pickedTeam = isHome ? game.homeTeam : game.awayTeam;\n    const opponent = isHome ? game.awayTeam : game.homeTeam;\n    const data = {\n        gameId: game.id,\n        teamId: topTeamId,\n        teamName: pickedTeam.displayName,\n        teamAbbreviation: pickedTeam.abbreviation,\n        teamLogo: pickedTeam.logo,\n        opponentName: opponent.displayName,\n        opponentAbbreviation: opponent.abbreviation,\n        opponentLogo: opponent.logo,\n        pickCount: topCount,\n        totalPicksForGame: gameCounts[game.id] || topCount,\n        gameDate: game.date,\n        startTime: game.startTime,\n        sport: game.sport\n    };\n    return {\n        id: `trending-${today}`,\n        type: \"trending_pick\",\n        timestamp: Date.now(),\n        sport: game.sport,\n        data\n    };\n}\n// --- Hot Picks ---\n// Shows who picked what today — one post per day, only on daysOffset=0.\n// Surfaces up to 5 picks across all users, preferring variety (one per user).\nasync function buildHotPicks(games) {\n    const today = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.todayString)();\n    const picks = (0,_lib_storage__WEBPACK_IMPORTED_MODULE_2__.getPicksByDate)(today);\n    if (picks.length === 0) return null;\n    // Build a lookup map: gameId → Game\n    const gameMap = new Map(games.map((g)=>[\n            g.id,\n            g\n        ]));\n    // Collect one pick per user (first pick for variety), resolved to team info\n    const seenUsers = new Set();\n    const entries = [];\n    for (const pick of picks){\n        if (seenUsers.has(pick.username)) continue;\n        const game = gameMap.get(pick.gameId);\n        if (!game) continue;\n        const isHome = game.homeTeam.id === pick.pickedTeamId;\n        const pickedTeam = isHome ? game.homeTeam : game.awayTeam;\n        const opponent = isHome ? game.awayTeam : game.homeTeam;\n        entries.push({\n            username: pick.username,\n            pickedTeamId: pick.pickedTeamId,\n            pickedTeamName: pickedTeam.displayName,\n            pickedTeamAbbreviation: pickedTeam.abbreviation,\n            pickedTeamLogo: pickedTeam.logo,\n            opponentAbbreviation: opponent.abbreviation,\n            opponentLogo: opponent.logo,\n            sport: game.sport,\n            gameId: game.id\n        });\n        seenUsers.add(pick.username);\n        if (entries.length >= 5) break;\n    }\n    if (entries.length === 0) return null;\n    const headline = entries.length === 1 ? `${entries[0].username} is locked in today` : `${entries.length} picks are in — see who's riding who`;\n    const data = {\n        date: today,\n        picks: entries,\n        headline\n    };\n    return {\n        id: `hotpicks-${today}`,\n        type: \"hot_picks\",\n        timestamp: Date.now() - 30000,\n        sport: entries[0].sport,\n        data\n    };\n}\n// --- Big Game Tracker ---\nfunction scoreBigGame(game) {\n    let score = 0;\n    const homeRec = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.parseRecord)(game.homeTeam.record);\n    const awayRec = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.parseRecord)(game.awayTeam.record);\n    const homeGames = homeRec.wins + homeRec.losses || 1;\n    const awayGames = awayRec.wins + awayRec.losses || 1;\n    const homeWinPct = homeRec.wins / homeGames;\n    const awayWinPct = awayRec.wins / awayGames;\n    // Penalize lopsided matchups — big win% gap means boring game\n    const winPctDiff = Math.abs(homeWinPct - awayWinPct);\n    if (winPctDiff > 0.25) return 0; // Skip games with 25%+ win rate gap\n    if (winPctDiff > 0.15) score -= 1; // Minor penalty for moderate gap\n    // Both teams have winning records\n    if (homeRec.wins > homeRec.losses && awayRec.wins > awayRec.losses) {\n        score += 2;\n    }\n    // Close game (in progress or final)\n    if (game.homeScore !== null && game.awayScore !== null) {\n        const diff = Math.abs(game.homeScore - game.awayScore);\n        if (diff <= 5) score += 3;\n        else if (diff <= 10) score += 1;\n        // Penalize blowouts\n        if (diff >= 20) return 0;\n        if (diff >= 15) score -= 2;\n    }\n    // Both teams have strong records (combined wins > 60)\n    if (homeRec.wins + awayRec.wins > 60) {\n        score += 1;\n    }\n    // Scheduled games between evenly-matched top teams get a bump\n    if (game.status === \"scheduled\") {\n        if (homeWinPct > 0.6 && awayWinPct > 0.6) score += 2;\n        // Bonus for very close matchups\n        if (winPctDiff < 0.05 && homeWinPct > 0.5 && awayWinPct > 0.5) score += 1;\n    }\n    return score;\n}\nfunction getBigGameHeadline(game) {\n    const homeRec = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.parseRecord)(game.homeTeam.record);\n    const awayRec = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.parseRecord)(game.awayTeam.record);\n    const homeGames = homeRec.wins + homeRec.losses || 1;\n    const awayGames = awayRec.wins + awayRec.losses || 1;\n    const homeWinPct = homeRec.wins / homeGames;\n    const awayWinPct = awayRec.wins / awayGames;\n    const winPctDiff = Math.abs(homeWinPct - awayWinPct);\n    if (game.homeScore !== null && game.awayScore !== null) {\n        const diff = Math.abs(game.homeScore - game.awayScore);\n        if (diff <= 3 && game.status === \"final\") return \"Nail-Biter Finish\";\n        if (diff <= 5 && game.status === \"in_progress\") return \"Close Game Alert\";\n        if (diff <= 8 && game.status === \"final\") return \"Down-to-the-Wire\";\n    }\n    if (homeWinPct > 0.65 && awayWinPct > 0.65) return \"Elite Matchup\";\n    if (winPctDiff < 0.05 && homeWinPct > 0.5) return \"Dead-Even Clash\";\n    if (homeRec.wins > homeRec.losses && awayRec.wins > awayRec.losses) return \"Playoff-Caliber Clash\";\n    return \"Must-Watch Game\";\n}\nfunction buildBigGames(games) {\n    const scored = games.map((game)=>({\n            game,\n            score: scoreBigGame(game)\n        })).filter(({ score })=>score >= 2).sort((a, b)=>b.score - a.score).slice(0, 10);\n    return scored.map(({ game })=>{\n        const data = {\n            gameId: game.id,\n            homeTeam: game.homeTeam,\n            awayTeam: game.awayTeam,\n            startTime: game.startTime,\n            gameDate: game.date,\n            sport: game.sport,\n            headline: getBigGameHeadline(game),\n            homeScore: game.homeScore,\n            awayScore: game.awayScore,\n            status: game.status\n        };\n        return {\n            id: `biggame-${game.id}`,\n            type: \"big_game\",\n            timestamp: Date.now() - 60000,\n            sport: game.sport,\n            data\n        };\n    });\n}\nconst SPORT_THRESHOLDS = {\n    nba: [\n        {\n            labelKey: \"PTS\",\n            thresholds: {\n                PTS: 30\n            }\n        },\n        {\n            labelKey: \"REB\",\n            thresholds: {\n                REB: 15\n            }\n        },\n        {\n            labelKey: \"AST\",\n            thresholds: {\n                AST: 12\n            }\n        }\n    ],\n    nfl: [\n        {\n            labelKey: \"YDS\",\n            thresholds: {\n                YDS: 300\n            }\n        },\n        {\n            labelKey: \"TD\",\n            thresholds: {\n                TD: 3\n            }\n        }\n    ],\n    nhl: [\n        {\n            labelKey: \"G\",\n            thresholds: {\n                G: 3\n            }\n        }\n    ],\n    mlb: [\n        {\n            labelKey: \"HR\",\n            thresholds: {\n                HR: 3\n            }\n        },\n        {\n            labelKey: \"RBI\",\n            thresholds: {\n                RBI: 5\n            }\n        }\n    ]\n};\nfunction isStandout(sport, statMap) {\n    const thresholdSets = SPORT_THRESHOLDS[sport] || [];\n    for (const { labelKey, thresholds } of thresholdSets){\n        const val = statMap[labelKey] || 0;\n        const threshold = thresholds[labelKey] || Infinity;\n        if (val >= threshold) return true;\n    }\n    // NBA double-double with 25+ pts\n    if (sport === \"nba\") {\n        const pts = statMap[\"PTS\"] || 0;\n        const reb = statMap[\"REB\"] || 0;\n        const ast = statMap[\"AST\"] || 0;\n        if (pts >= 25 && (reb >= 10 || ast >= 10)) return true;\n    }\n    return false;\n}\nfunction buildStatHeadline(sport, statMap) {\n    const parts = [];\n    if (sport === \"nba\") {\n        if (statMap[\"PTS\"]) parts.push(`${statMap[\"PTS\"]} PTS`);\n        if (statMap[\"REB\"]) parts.push(`${statMap[\"REB\"]} REB`);\n        if (statMap[\"AST\"]) parts.push(`${statMap[\"AST\"]} AST`);\n        if (statMap[\"STL\"] && statMap[\"STL\"] >= 3) parts.push(`${statMap[\"STL\"]} STL`);\n        if (statMap[\"BLK\"] && statMap[\"BLK\"] >= 3) parts.push(`${statMap[\"BLK\"]} BLK`);\n    } else if (sport === \"nfl\") {\n        if (statMap[\"YDS\"]) parts.push(`${statMap[\"YDS\"]} YDS`);\n        if (statMap[\"TD\"]) parts.push(`${statMap[\"TD\"]} TD`);\n    } else if (sport === \"nhl\") {\n        if (statMap[\"G\"]) parts.push(`${statMap[\"G\"]} G`);\n        if (statMap[\"A\"]) parts.push(`${statMap[\"A\"]} A`);\n    } else if (sport === \"mlb\") {\n        if (statMap[\"HR\"]) parts.push(`${statMap[\"HR\"]} HR`);\n        if (statMap[\"RBI\"]) parts.push(`${statMap[\"RBI\"]} RBI`);\n        if (statMap[\"H\"]) parts.push(`${statMap[\"H\"]} H`);\n    }\n    return parts.join(\" | \") || \"Great Game\";\n}\nasync function buildPlayerPerformances(dates, allGames, maxPosts = 20) {\n    const finalGames = allGames.filter((g)=>g.status === \"final\");\n    const posts = [];\n    for (const game of finalGames){\n        if (posts.length >= maxPosts) break;\n        // Check cache first\n        const cacheKey = `perf-${game.id}`;\n        const cached = (0,_lib_storage__WEBPACK_IMPORTED_MODULE_2__.readGameCache)(cacheKey);\n        if (cached) {\n            const { data } = cached;\n            if (data && data.length > 0) {\n                posts.push(...data);\n                continue;\n            }\n            // Cached as empty = no standouts\n            if (data && data.length === 0) continue;\n        }\n        const summary = await (0,_lib_espn__WEBPACK_IMPORTED_MODULE_1__.fetchGameSummary)(game.sport, game.id);\n        if (!summary?.boxscore?.players) {\n            (0,_lib_storage__WEBPACK_IMPORTED_MODULE_2__.writeGameCache)(cacheKey, []);\n            continue;\n        }\n        const gamePosts = [];\n        for (const teamStats of summary.boxscore.players){\n            if (!teamStats.statistics?.[0]) continue;\n            const labels = teamStats.statistics[0].labels;\n            const athletes = teamStats.statistics[0].athletes;\n            for (const athlete of athletes){\n                const statMap = {};\n                labels.forEach((label, idx)=>{\n                    const val = parseFloat(athlete.stats[idx]);\n                    if (!isNaN(val)) statMap[label] = val;\n                });\n                if (isStandout(game.sport, statMap)) {\n                    // Determine opponent\n                    const isHomeTeam = teamStats.team.abbreviation === game.homeTeam.abbreviation;\n                    const opponent = isHomeTeam ? game.awayTeam : game.homeTeam;\n                    const isWin = isHomeTeam ? (game.homeScore || 0) > (game.awayScore || 0) : (game.awayScore || 0) > (game.homeScore || 0);\n                    const playerImageUrl = athlete.athlete.headshot?.href || (0,_lib_espn__WEBPACK_IMPORTED_MODULE_1__.getPlayerHeadshotUrl)(game.sport, athlete.athlete.id);\n                    const data = {\n                        playerName: athlete.athlete.displayName,\n                        playerImageUrl,\n                        teamAbbreviation: teamStats.team.abbreviation,\n                        teamLogo: teamStats.team.logo,\n                        sport: game.sport,\n                        stats: statMap,\n                        headline: buildStatHeadline(game.sport, statMap),\n                        gameId: game.id,\n                        opponentAbbreviation: opponent.abbreviation,\n                        gameDate: game.date,\n                        isWin\n                    };\n                    gamePosts.push({\n                        id: `perf-${game.id}-${athlete.athlete.id}`,\n                        type: \"player_performance\",\n                        timestamp: new Date(game.startTime).getTime(),\n                        sport: game.sport,\n                        data\n                    });\n                }\n            }\n        }\n        (0,_lib_storage__WEBPACK_IMPORTED_MODULE_2__.writeGameCache)(cacheKey, gamePosts);\n        posts.push(...gamePosts);\n    }\n    return posts.slice(0, maxPosts);\n}\n// --- Game Results ---\nfunction buildGameResults(games, dates) {\n    const posts = [];\n    for (const game of games){\n        if (game.status !== \"final\") continue;\n        if (game.homeScore === null || game.awayScore === null) continue;\n        const winnerId = game.homeScore > game.awayScore ? game.homeTeam.id : game.awayTeam.id;\n        const winner = game.homeScore > game.awayScore ? game.homeTeam : game.awayTeam;\n        // Get picks for this game's date\n        const gamePicks = (0,_lib_storage__WEBPACK_IMPORTED_MODULE_2__.getPicksByDate)(game.date).filter((p)=>p.gameId === game.id);\n        if (gamePicks.length === 0) continue;\n        const entries = gamePicks.slice(0, 5).map((p)=>{\n            const isHome = p.pickedTeamId === game.homeTeam.id;\n            const pickedTeam = isHome ? game.homeTeam : game.awayTeam;\n            return {\n                username: p.username,\n                pickedTeamId: p.pickedTeamId,\n                pickedTeamAbbreviation: pickedTeam.abbreviation,\n                pickedTeamLogo: pickedTeam.logo,\n                correct: p.pickedTeamId === winnerId\n            };\n        });\n        const data = {\n            gameId: game.id,\n            sport: game.sport,\n            homeTeam: game.homeTeam,\n            awayTeam: game.awayTeam,\n            homeScore: game.homeScore,\n            awayScore: game.awayScore,\n            gameDate: game.date,\n            winnerAbbreviation: winner.abbreviation,\n            correctPickers: entries.filter((e)=>e.correct),\n            totalPickers: gamePicks.length\n        };\n        posts.push({\n            id: `gameresult-${game.id}`,\n            type: \"game_result\",\n            timestamp: new Date(game.startTime).getTime() + 3 * 3600000,\n            sport: game.sport,\n            data\n        });\n    }\n    return posts;\n}\n// --- News ---\nasync function buildNewsPosts() {\n    const allArticles = [];\n    await Promise.all(_lib_espn__WEBPACK_IMPORTED_MODULE_1__.SPORT_CONFIGS.map(async ({ sport })=>{\n        // General league news (no team tag)\n        const leagueArticles = await (0,_lib_espn__WEBPACK_IMPORTED_MODULE_1__.fetchSportNews)(sport);\n        for (const article of leagueArticles.slice(0, 5)){\n            allArticles.push({\n                article,\n                sport,\n                teamAbbreviations: []\n            });\n        }\n        // Per-team news — fetch all teams for this sport in batches of 8\n        const teams = await (0,_lib_espn__WEBPACK_IMPORTED_MODULE_1__.fetchTeams)(sport);\n        const BATCH = 8;\n        for(let i = 0; i < teams.length; i += BATCH){\n            const batch = teams.slice(i, i + BATCH);\n            await Promise.all(batch.map(async (team)=>{\n                const teamArticles = await (0,_lib_espn__WEBPACK_IMPORTED_MODULE_1__.fetchTeamNews)(sport, team.id);\n                for (const article of teamArticles.slice(0, 2)){\n                    allArticles.push({\n                        article,\n                        sport,\n                        teamAbbreviations: [\n                            team.abbreviation\n                        ]\n                    });\n                }\n            }));\n        }\n    }));\n    // Deduplicate by link URL — same article can appear for multiple teams; merge their abbreviations\n    const byLink = new Map();\n    for (const item of allArticles){\n        const key = item.article.links?.web?.href || item.article.headline;\n        const existing = byLink.get(key);\n        if (existing) {\n            existing.teamAbbreviations = Array.from(new Set([\n                ...existing.teamAbbreviations,\n                ...item.teamAbbreviations\n            ]));\n        } else {\n            byLink.set(key, {\n                ...item,\n                teamAbbreviations: [\n                    ...item.teamAbbreviations\n                ]\n            });\n        }\n    }\n    const deduped = Array.from(byLink.values());\n    // Sort by published date descending\n    deduped.sort((a, b)=>new Date(b.article.published).getTime() - new Date(a.article.published).getTime());\n    return deduped.map(({ article, sport, teamAbbreviations })=>{\n        const data = {\n            headline: article.headline,\n            description: article.description || \"\",\n            imageUrl: article.images?.[0]?.url,\n            linkUrl: article.links?.web?.href || \"\",\n            sport,\n            published: article.published,\n            teamAbbreviations\n        };\n        return {\n            id: `news-${sport}-${new Date(article.published).getTime()}-${teamAbbreviations.join(\"-\")}`,\n            type: \"news\",\n            timestamp: new Date(article.published).getTime(),\n            sport,\n            data\n        };\n    });\n}\n// --- Main handler ---\n// Pagination is date-based: each page covers a window of DAYS_PER_PAGE days.\n// daysOffset=0 → today..4 days ago, daysOffset=5 → 5..9 days ago, etc.\n// Max lookback is 50 days.\nconst DAYS_PER_PAGE = 5;\nconst MAX_DAYS = 50;\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const daysOffset = Math.max(0, parseInt(searchParams.get(\"daysOffset\") || \"0\", 10));\n        const today = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.todayString)();\n        // Clamp so we never go beyond 50 days back\n        const windowStart = daysOffset;\n        const windowEnd = Math.min(daysOffset + DAYS_PER_PAGE - 1, MAX_DAYS - 1);\n        const hasMore = windowEnd < MAX_DAYS - 1;\n        // Build the list of dates for this window\n        const dates = [];\n        for(let i = windowStart; i <= windowEnd; i++){\n            dates.push((0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.addDays)(today, -i));\n        }\n        // Check per-window cache (10 min TTL for recent pages, permanent for old ones)\n        const cacheKey = `feed-window-${daysOffset}`;\n        const cached = (0,_lib_storage__WEBPACK_IMPORTED_MODULE_2__.readGameCache)(cacheKey);\n        if (cached) {\n            const { data, ageMinutes } = cached;\n            // Old windows (>5 days ago) are effectively immutable — cache forever\n            const ttl = daysOffset >= 5 ? Infinity : 10;\n            if (ageMinutes < ttl) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    posts: data,\n                    hasMore\n                });\n            }\n        }\n        // Fetch games for all dates in this window in parallel\n        const gamesByDate = await Promise.all(dates.map((d)=>(0,_lib_espn__WEBPACK_IMPORTED_MODULE_1__.fetchGames)(d)));\n        const windowGames = gamesByDate.flat();\n        const todayGames = daysOffset === 0 ? gamesByDate[0] : [];\n        // Build post types\n        const [trendingPick, hotPicksPost, newsPosts, playerPosts] = await Promise.all([\n            daysOffset === 0 ? buildTrendingPick(todayGames) : Promise.resolve(null),\n            daysOffset === 0 ? buildHotPicks(todayGames) : Promise.resolve(null),\n            daysOffset === 0 ? buildNewsPosts() : Promise.resolve([]),\n            buildPlayerPerformances(dates, windowGames, 20)\n        ]);\n        const bigGamePosts = buildBigGames(windowGames);\n        const gameResultPosts = buildGameResults(windowGames, dates);\n        const posts = [];\n        if (trendingPick) posts.push(trendingPick);\n        if (hotPicksPost) posts.push(hotPicksPost);\n        posts.push(...bigGamePosts);\n        posts.push(...gameResultPosts);\n        posts.push(...playerPosts);\n        posts.push(...newsPosts);\n        // Sort newest first within this window\n        posts.sort((a, b)=>b.timestamp - a.timestamp);\n        (0,_lib_storage__WEBPACK_IMPORTED_MODULE_2__.writeGameCache)(cacheKey, posts);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            posts,\n            hasMore\n        });\n    } catch (error) {\n        console.error(\"Feed error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            posts: [],\n            hasMore: false\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0MsZUFBZSxJQUFJN0wsa0JBQWtCMk0sY0FBYy9DLFFBQVFvRCxPQUFPLENBQUM7WUFDbkVuQixlQUFlLElBQUloSixjQUFjOEosY0FBYy9DLFFBQVFvRCxPQUFPLENBQUM7WUFDL0RuQixlQUFlLElBQUluQyxtQkFBbUJFLFFBQVFvRCxPQUFPLENBQUMsRUFBRTtZQUN4RC9GLHdCQUF3QkMsT0FBT3VGLGFBQWE7U0FDN0M7UUFFRCxNQUFNUSxlQUFlbEksY0FBYzBIO1FBQ25DLE1BQU1TLGtCQUFrQmxFLGlCQUFpQnlELGFBQWF2RjtRQUV0RCxNQUFNSSxRQUFvQixFQUFFO1FBQzVCLElBQUlzRixjQUFjdEYsTUFBTWhFLElBQUksQ0FBQ3NKO1FBQzdCLElBQUlDLGNBQWN2RixNQUFNaEUsSUFBSSxDQUFDdUo7UUFDN0J2RixNQUFNaEUsSUFBSSxJQUFJMko7UUFDZDNGLE1BQU1oRSxJQUFJLElBQUk0SjtRQUNkNUYsTUFBTWhFLElBQUksSUFBSXlKO1FBQ2R6RixNQUFNaEUsSUFBSSxJQUFJd0o7UUFFZCx1Q0FBdUM7UUFDdkN4RixNQUFNcEMsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1BLEVBQUUxQyxTQUFTLEdBQUd5QyxFQUFFekMsU0FBUztRQUU5QzNDLDREQUFjQSxDQUFDd0gsVUFBVUQ7UUFFekIsT0FBT3JJLHFEQUFZQSxDQUFDcU4sSUFBSSxDQUFDO1lBQUVoRjtZQUFPNkU7UUFBUTtJQUM1QyxFQUFFLE9BQU9nQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxlQUFlQTtRQUM3QixPQUFPbE8scURBQVlBLENBQUNxTixJQUFJLENBQUM7WUFBRWhGLE9BQU8sRUFBRTtZQUFFNkUsU0FBUztRQUFNO0lBQ3ZEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9waWNrcy8uL3NyYy9hcHAvYXBpL2ZlZWQvcm91dGUudHM/OGMxMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQge1xuICBGZWVkUG9zdCxcbiAgVHJlbmRpbmdQaWNrRGF0YSxcbiAgQmlnR2FtZURhdGEsXG4gIFBsYXllclBlcmZvcm1hbmNlRGF0YSxcbiAgTmV3c0RhdGEsXG4gIEhvdFBpY2tzRGF0YSxcbiAgSG90UGlja0VudHJ5LFxuICBHYW1lUmVzdWx0RGF0YSxcbiAgR2FtZVJlc3VsdFBpY2tFbnRyeSxcbiAgU3BvcnQsXG4gIEdhbWUsXG59IGZyb20gJ0AvbGliL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5pbXBvcnQgeyBmZXRjaEdhbWVzLCBmZXRjaEdhbWVTdW1tYXJ5LCBmZXRjaFNwb3J0TmV3cywgZmV0Y2hUZWFtTmV3cywgZmV0Y2hUZWFtcywgU1BPUlRfQ09ORklHUywgZ2V0UGxheWVySGVhZHNob3RVcmwgfSBmcm9tICdAL2xpYi9lc3BuJztcbmltcG9ydCB7IGdldFBpY2tzQnlEYXRlIH0gZnJvbSAnQC9saWIvc3RvcmFnZSc7XG5pbXBvcnQgeyB0b2RheVN0cmluZywgYWRkRGF5cywgcGFyc2VSZWNvcmQgfSBmcm9tICdAL2xpYi91dGlscyc7XG5pbXBvcnQgeyByZWFkR2FtZUNhY2hlLCB3cml0ZUdhbWVDYWNoZSB9IGZyb20gJ0AvbGliL3N0b3JhZ2UnO1xuXG4vLyAtLS0gVHJlbmRpbmcgUGljayAtLS1cblxuYXN5bmMgZnVuY3Rpb24gYnVpbGRUcmVuZGluZ1BpY2soZ2FtZXM6IEdhbWVbXSk6IFByb21pc2U8RmVlZFBvc3QgfCBudWxsPiB7XG4gIGNvbnN0IHRvZGF5ID0gdG9kYXlTdHJpbmcoKTtcbiAgY29uc3QgcGlja3MgPSBnZXRQaWNrc0J5RGF0ZSh0b2RheSk7XG4gIGlmIChwaWNrcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gIC8vIENvdW50IHBpY2tzIHBlciB0ZWFtXG4gIGNvbnN0IHRlYW1Db3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgY29uc3QgZ2FtZUNvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICBmb3IgKGNvbnN0IHBpY2sgb2YgcGlja3MpIHtcbiAgICB0ZWFtQ291bnRzW3BpY2sucGlja2VkVGVhbUlkXSA9ICh0ZWFtQ291bnRzW3BpY2sucGlja2VkVGVhbUlkXSB8fCAwKSArIDE7XG4gICAgZ2FtZUNvdW50c1twaWNrLmdhbWVJZF0gPSAoZ2FtZUNvdW50c1twaWNrLmdhbWVJZF0gfHwgMCkgKyAxO1xuICB9XG5cbiAgLy8gRmluZCB0ZWFtIHdpdGggbW9zdCBwaWNrc1xuICBsZXQgdG9wVGVhbUlkID0gJyc7XG4gIGxldCB0b3BDb3VudCA9IDA7XG4gIGZvciAoY29uc3QgW3RlYW1JZCwgY291bnRdIG9mIE9iamVjdC5lbnRyaWVzKHRlYW1Db3VudHMpKSB7XG4gICAgaWYgKGNvdW50ID4gdG9wQ291bnQpIHtcbiAgICAgIHRvcFRlYW1JZCA9IHRlYW1JZDtcbiAgICAgIHRvcENvdW50ID0gY291bnQ7XG4gICAgfVxuICB9XG5cbiAgaWYgKCF0b3BUZWFtSWQpIHJldHVybiBudWxsO1xuXG4gIC8vIEZpbmQgdGhlIGdhbWUgZm9yIHRoaXMgdGVhbVxuICBjb25zdCBnYW1lID0gZ2FtZXMuZmluZChcbiAgICAoZykgPT4gZy5ob21lVGVhbS5pZCA9PT0gdG9wVGVhbUlkIHx8IGcuYXdheVRlYW0uaWQgPT09IHRvcFRlYW1JZFxuICApO1xuICBpZiAoIWdhbWUpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGlzSG9tZSA9IGdhbWUuaG9tZVRlYW0uaWQgPT09IHRvcFRlYW1JZDtcbiAgY29uc3QgcGlja2VkVGVhbSA9IGlzSG9tZSA/IGdhbWUuaG9tZVRlYW0gOiBnYW1lLmF3YXlUZWFtO1xuICBjb25zdCBvcHBvbmVudCA9IGlzSG9tZSA/IGdhbWUuYXdheVRlYW0gOiBnYW1lLmhvbWVUZWFtO1xuXG4gIGNvbnN0IGRhdGE6IFRyZW5kaW5nUGlja0RhdGEgPSB7XG4gICAgZ2FtZUlkOiBnYW1lLmlkLFxuICAgIHRlYW1JZDogdG9wVGVhbUlkLFxuICAgIHRlYW1OYW1lOiBwaWNrZWRUZWFtLmRpc3BsYXlOYW1lLFxuICAgIHRlYW1BYmJyZXZpYXRpb246IHBpY2tlZFRlYW0uYWJicmV2aWF0aW9uLFxuICAgIHRlYW1Mb2dvOiBwaWNrZWRUZWFtLmxvZ28sXG4gICAgb3Bwb25lbnROYW1lOiBvcHBvbmVudC5kaXNwbGF5TmFtZSxcbiAgICBvcHBvbmVudEFiYnJldmlhdGlvbjogb3Bwb25lbnQuYWJicmV2aWF0aW9uLFxuICAgIG9wcG9uZW50TG9nbzogb3Bwb25lbnQubG9nbyxcbiAgICBwaWNrQ291bnQ6IHRvcENvdW50LFxuICAgIHRvdGFsUGlja3NGb3JHYW1lOiBnYW1lQ291bnRzW2dhbWUuaWRdIHx8IHRvcENvdW50LFxuICAgIGdhbWVEYXRlOiBnYW1lLmRhdGUsXG4gICAgc3RhcnRUaW1lOiBnYW1lLnN0YXJ0VGltZSxcbiAgICBzcG9ydDogZ2FtZS5zcG9ydCxcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGlkOiBgdHJlbmRpbmctJHt0b2RheX1gLFxuICAgIHR5cGU6ICd0cmVuZGluZ19waWNrJyxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgc3BvcnQ6IGdhbWUuc3BvcnQsXG4gICAgZGF0YSxcbiAgfTtcbn1cblxuLy8gLS0tIEhvdCBQaWNrcyAtLS1cbi8vIFNob3dzIHdobyBwaWNrZWQgd2hhdCB0b2RheSDigJQgb25lIHBvc3QgcGVyIGRheSwgb25seSBvbiBkYXlzT2Zmc2V0PTAuXG4vLyBTdXJmYWNlcyB1cCB0byA1IHBpY2tzIGFjcm9zcyBhbGwgdXNlcnMsIHByZWZlcnJpbmcgdmFyaWV0eSAob25lIHBlciB1c2VyKS5cblxuYXN5bmMgZnVuY3Rpb24gYnVpbGRIb3RQaWNrcyhnYW1lczogR2FtZVtdKTogUHJvbWlzZTxGZWVkUG9zdCB8IG51bGw+IHtcbiAgY29uc3QgdG9kYXkgPSB0b2RheVN0cmluZygpO1xuICBjb25zdCBwaWNrcyA9IGdldFBpY2tzQnlEYXRlKHRvZGF5KTtcbiAgaWYgKHBpY2tzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgLy8gQnVpbGQgYSBsb29rdXAgbWFwOiBnYW1lSWQg4oaSIEdhbWVcbiAgY29uc3QgZ2FtZU1hcCA9IG5ldyBNYXAoZ2FtZXMubWFwKChnKSA9PiBbZy5pZCwgZ10pKTtcblxuICAvLyBDb2xsZWN0IG9uZSBwaWNrIHBlciB1c2VyIChmaXJzdCBwaWNrIGZvciB2YXJpZXR5KSwgcmVzb2x2ZWQgdG8gdGVhbSBpbmZvXG4gIGNvbnN0IHNlZW5Vc2VycyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCBlbnRyaWVzOiBIb3RQaWNrRW50cnlbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgcGljayBvZiBwaWNrcykge1xuICAgIGlmIChzZWVuVXNlcnMuaGFzKHBpY2sudXNlcm5hbWUpKSBjb250aW51ZTtcbiAgICBjb25zdCBnYW1lID0gZ2FtZU1hcC5nZXQocGljay5nYW1lSWQpO1xuICAgIGlmICghZ2FtZSkgY29udGludWU7XG5cbiAgICBjb25zdCBpc0hvbWUgPSBnYW1lLmhvbWVUZWFtLmlkID09PSBwaWNrLnBpY2tlZFRlYW1JZDtcbiAgICBjb25zdCBwaWNrZWRUZWFtID0gaXNIb21lID8gZ2FtZS5ob21lVGVhbSA6IGdhbWUuYXdheVRlYW07XG4gICAgY29uc3Qgb3Bwb25lbnQgPSBpc0hvbWUgPyBnYW1lLmF3YXlUZWFtIDogZ2FtZS5ob21lVGVhbTtcblxuICAgIGVudHJpZXMucHVzaCh7XG4gICAgICB1c2VybmFtZTogcGljay51c2VybmFtZSxcbiAgICAgIHBpY2tlZFRlYW1JZDogcGljay5waWNrZWRUZWFtSWQsXG4gICAgICBwaWNrZWRUZWFtTmFtZTogcGlja2VkVGVhbS5kaXNwbGF5TmFtZSxcbiAgICAgIHBpY2tlZFRlYW1BYmJyZXZpYXRpb246IHBpY2tlZFRlYW0uYWJicmV2aWF0aW9uLFxuICAgICAgcGlja2VkVGVhbUxvZ286IHBpY2tlZFRlYW0ubG9nbyxcbiAgICAgIG9wcG9uZW50QWJicmV2aWF0aW9uOiBvcHBvbmVudC5hYmJyZXZpYXRpb24sXG4gICAgICBvcHBvbmVudExvZ286IG9wcG9uZW50LmxvZ28sXG4gICAgICBzcG9ydDogZ2FtZS5zcG9ydCxcbiAgICAgIGdhbWVJZDogZ2FtZS5pZCxcbiAgICB9KTtcblxuICAgIHNlZW5Vc2Vycy5hZGQocGljay51c2VybmFtZSk7XG4gICAgaWYgKGVudHJpZXMubGVuZ3RoID49IDUpIGJyZWFrO1xuICB9XG5cbiAgaWYgKGVudHJpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBoZWFkbGluZSA9XG4gICAgZW50cmllcy5sZW5ndGggPT09IDFcbiAgICAgID8gYCR7ZW50cmllc1swXS51c2VybmFtZX0gaXMgbG9ja2VkIGluIHRvZGF5YFxuICAgICAgOiBgJHtlbnRyaWVzLmxlbmd0aH0gcGlja3MgYXJlIGluIOKAlCBzZWUgd2hvJ3MgcmlkaW5nIHdob2A7XG5cbiAgY29uc3QgZGF0YTogSG90UGlja3NEYXRhID0ge1xuICAgIGRhdGU6IHRvZGF5LFxuICAgIHBpY2tzOiBlbnRyaWVzLFxuICAgIGhlYWRsaW5lLFxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaWQ6IGBob3RwaWNrcy0ke3RvZGF5fWAsXG4gICAgdHlwZTogJ2hvdF9waWNrcycsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gMzAwMDAsIC8vIGJldHdlZW4gdHJlbmRpbmcgYW5kIGJpZyBnYW1lXG4gICAgc3BvcnQ6IGVudHJpZXNbMF0uc3BvcnQsXG4gICAgZGF0YSxcbiAgfTtcbn1cblxuLy8gLS0tIEJpZyBHYW1lIFRyYWNrZXIgLS0tXG5cbmZ1bmN0aW9uIHNjb3JlQmlnR2FtZShnYW1lOiBHYW1lKTogbnVtYmVyIHtcbiAgbGV0IHNjb3JlID0gMDtcblxuICBjb25zdCBob21lUmVjID0gcGFyc2VSZWNvcmQoZ2FtZS5ob21lVGVhbS5yZWNvcmQpO1xuICBjb25zdCBhd2F5UmVjID0gcGFyc2VSZWNvcmQoZ2FtZS5hd2F5VGVhbS5yZWNvcmQpO1xuICBjb25zdCBob21lR2FtZXMgPSBob21lUmVjLndpbnMgKyBob21lUmVjLmxvc3NlcyB8fCAxO1xuICBjb25zdCBhd2F5R2FtZXMgPSBhd2F5UmVjLndpbnMgKyBhd2F5UmVjLmxvc3NlcyB8fCAxO1xuICBjb25zdCBob21lV2luUGN0ID0gaG9tZVJlYy53aW5zIC8gaG9tZUdhbWVzO1xuICBjb25zdCBhd2F5V2luUGN0ID0gYXdheVJlYy53aW5zIC8gYXdheUdhbWVzO1xuXG4gIC8vIFBlbmFsaXplIGxvcHNpZGVkIG1hdGNodXBzIOKAlCBiaWcgd2luJSBnYXAgbWVhbnMgYm9yaW5nIGdhbWVcbiAgY29uc3Qgd2luUGN0RGlmZiA9IE1hdGguYWJzKGhvbWVXaW5QY3QgLSBhd2F5V2luUGN0KTtcbiAgaWYgKHdpblBjdERpZmYgPiAwLjI1KSByZXR1cm4gMDsgLy8gU2tpcCBnYW1lcyB3aXRoIDI1JSsgd2luIHJhdGUgZ2FwXG4gIGlmICh3aW5QY3REaWZmID4gMC4xNSkgc2NvcmUgLT0gMTsgLy8gTWlub3IgcGVuYWx0eSBmb3IgbW9kZXJhdGUgZ2FwXG5cbiAgLy8gQm90aCB0ZWFtcyBoYXZlIHdpbm5pbmcgcmVjb3Jkc1xuICBpZiAoaG9tZVJlYy53aW5zID4gaG9tZVJlYy5sb3NzZXMgJiYgYXdheVJlYy53aW5zID4gYXdheVJlYy5sb3NzZXMpIHtcbiAgICBzY29yZSArPSAyO1xuICB9XG5cbiAgLy8gQ2xvc2UgZ2FtZSAoaW4gcHJvZ3Jlc3Mgb3IgZmluYWwpXG4gIGlmIChnYW1lLmhvbWVTY29yZSAhPT0gbnVsbCAmJiBnYW1lLmF3YXlTY29yZSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGRpZmYgPSBNYXRoLmFicyhnYW1lLmhvbWVTY29yZSAtIGdhbWUuYXdheVNjb3JlKTtcbiAgICBpZiAoZGlmZiA8PSA1KSBzY29yZSArPSAzO1xuICAgIGVsc2UgaWYgKGRpZmYgPD0gMTApIHNjb3JlICs9IDE7XG4gICAgLy8gUGVuYWxpemUgYmxvd291dHNcbiAgICBpZiAoZGlmZiA+PSAyMCkgcmV0dXJuIDA7XG4gICAgaWYgKGRpZmYgPj0gMTUpIHNjb3JlIC09IDI7XG4gIH1cblxuICAvLyBCb3RoIHRlYW1zIGhhdmUgc3Ryb25nIHJlY29yZHMgKGNvbWJpbmVkIHdpbnMgPiA2MClcbiAgaWYgKGhvbWVSZWMud2lucyArIGF3YXlSZWMud2lucyA+IDYwKSB7XG4gICAgc2NvcmUgKz0gMTtcbiAgfVxuXG4gIC8vIFNjaGVkdWxlZCBnYW1lcyBiZXR3ZWVuIGV2ZW5seS1tYXRjaGVkIHRvcCB0ZWFtcyBnZXQgYSBidW1wXG4gIGlmIChnYW1lLnN0YXR1cyA9PT0gJ3NjaGVkdWxlZCcpIHtcbiAgICBpZiAoaG9tZVdpblBjdCA+IDAuNiAmJiBhd2F5V2luUGN0ID4gMC42KSBzY29yZSArPSAyO1xuICAgIC8vIEJvbnVzIGZvciB2ZXJ5IGNsb3NlIG1hdGNodXBzXG4gICAgaWYgKHdpblBjdERpZmYgPCAwLjA1ICYmIGhvbWVXaW5QY3QgPiAwLjUgJiYgYXdheVdpblBjdCA+IDAuNSkgc2NvcmUgKz0gMTtcbiAgfVxuXG4gIHJldHVybiBzY29yZTtcbn1cblxuZnVuY3Rpb24gZ2V0QmlnR2FtZUhlYWRsaW5lKGdhbWU6IEdhbWUpOiBzdHJpbmcge1xuICBjb25zdCBob21lUmVjID0gcGFyc2VSZWNvcmQoZ2FtZS5ob21lVGVhbS5yZWNvcmQpO1xuICBjb25zdCBhd2F5UmVjID0gcGFyc2VSZWNvcmQoZ2FtZS5hd2F5VGVhbS5yZWNvcmQpO1xuICBjb25zdCBob21lR2FtZXMgPSBob21lUmVjLndpbnMgKyBob21lUmVjLmxvc3NlcyB8fCAxO1xuICBjb25zdCBhd2F5R2FtZXMgPSBhd2F5UmVjLndpbnMgKyBhd2F5UmVjLmxvc3NlcyB8fCAxO1xuICBjb25zdCBob21lV2luUGN0ID0gaG9tZVJlYy53aW5zIC8gaG9tZUdhbWVzO1xuICBjb25zdCBhd2F5V2luUGN0ID0gYXdheVJlYy53aW5zIC8gYXdheUdhbWVzO1xuICBjb25zdCB3aW5QY3REaWZmID0gTWF0aC5hYnMoaG9tZVdpblBjdCAtIGF3YXlXaW5QY3QpO1xuXG4gIGlmIChnYW1lLmhvbWVTY29yZSAhPT0gbnVsbCAmJiBnYW1lLmF3YXlTY29yZSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGRpZmYgPSBNYXRoLmFicyhnYW1lLmhvbWVTY29yZSAtIGdhbWUuYXdheVNjb3JlKTtcbiAgICBpZiAoZGlmZiA8PSAzICYmIGdhbWUuc3RhdHVzID09PSAnZmluYWwnKSByZXR1cm4gJ05haWwtQml0ZXIgRmluaXNoJztcbiAgICBpZiAoZGlmZiA8PSA1ICYmIGdhbWUuc3RhdHVzID09PSAnaW5fcHJvZ3Jlc3MnKSByZXR1cm4gJ0Nsb3NlIEdhbWUgQWxlcnQnO1xuICAgIGlmIChkaWZmIDw9IDggJiYgZ2FtZS5zdGF0dXMgPT09ICdmaW5hbCcpIHJldHVybiAnRG93bi10by10aGUtV2lyZSc7XG4gIH1cblxuICBpZiAoaG9tZVdpblBjdCA+IDAuNjUgJiYgYXdheVdpblBjdCA+IDAuNjUpIHJldHVybiAnRWxpdGUgTWF0Y2h1cCc7XG4gIGlmICh3aW5QY3REaWZmIDwgMC4wNSAmJiBob21lV2luUGN0ID4gMC41KSByZXR1cm4gJ0RlYWQtRXZlbiBDbGFzaCc7XG4gIGlmIChob21lUmVjLndpbnMgPiBob21lUmVjLmxvc3NlcyAmJiBhd2F5UmVjLndpbnMgPiBhd2F5UmVjLmxvc3NlcykgcmV0dXJuICdQbGF5b2ZmLUNhbGliZXIgQ2xhc2gnO1xuXG4gIHJldHVybiAnTXVzdC1XYXRjaCBHYW1lJztcbn1cblxuZnVuY3Rpb24gYnVpbGRCaWdHYW1lcyhnYW1lczogR2FtZVtdKTogRmVlZFBvc3RbXSB7XG4gIGNvbnN0IHNjb3JlZCA9IGdhbWVzXG4gICAgLm1hcCgoZ2FtZSkgPT4gKHsgZ2FtZSwgc2NvcmU6IHNjb3JlQmlnR2FtZShnYW1lKSB9KSlcbiAgICAuZmlsdGVyKCh7IHNjb3JlIH0pID0+IHNjb3JlID49IDIpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKVxuICAgIC5zbGljZSgwLCAxMCk7XG5cbiAgcmV0dXJuIHNjb3JlZC5tYXAoKHsgZ2FtZSB9KSA9PiB7XG4gICAgY29uc3QgZGF0YTogQmlnR2FtZURhdGEgPSB7XG4gICAgICBnYW1lSWQ6IGdhbWUuaWQsXG4gICAgICBob21lVGVhbTogZ2FtZS5ob21lVGVhbSxcbiAgICAgIGF3YXlUZWFtOiBnYW1lLmF3YXlUZWFtLFxuICAgICAgc3RhcnRUaW1lOiBnYW1lLnN0YXJ0VGltZSxcbiAgICAgIGdhbWVEYXRlOiBnYW1lLmRhdGUsXG4gICAgICBzcG9ydDogZ2FtZS5zcG9ydCxcbiAgICAgIGhlYWRsaW5lOiBnZXRCaWdHYW1lSGVhZGxpbmUoZ2FtZSksXG4gICAgICBob21lU2NvcmU6IGdhbWUuaG9tZVNjb3JlLFxuICAgICAgYXdheVNjb3JlOiBnYW1lLmF3YXlTY29yZSxcbiAgICAgIHN0YXR1czogZ2FtZS5zdGF0dXMsXG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogYGJpZ2dhbWUtJHtnYW1lLmlkfWAsXG4gICAgICB0eXBlOiAnYmlnX2dhbWUnIGFzIGNvbnN0LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gNjAwMDAsIC8vIHNsaWdodGx5IG9sZGVyIHRoYW4gdHJlbmRpbmdcbiAgICAgIHNwb3J0OiBnYW1lLnNwb3J0LFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9KTtcbn1cblxuLy8gLS0tIFBsYXllciBQZXJmb3JtYW5jZSAtLS1cblxuaW50ZXJmYWNlIFN0YW5kb3V0VGhyZXNob2xkcyB7XG4gIFtrZXk6IHN0cmluZ106IG51bWJlcjtcbn1cblxuY29uc3QgU1BPUlRfVEhSRVNIT0xEUzogUmVjb3JkPFNwb3J0LCB7IGxhYmVsS2V5OiBzdHJpbmc7IHRocmVzaG9sZHM6IFN0YW5kb3V0VGhyZXNob2xkcyB9W10+ID0ge1xuICBuYmE6IFtcbiAgICB7IGxhYmVsS2V5OiAnUFRTJywgdGhyZXNob2xkczogeyBQVFM6IDMwIH0gfSxcbiAgICB7IGxhYmVsS2V5OiAnUkVCJywgdGhyZXNob2xkczogeyBSRUI6IDE1IH0gfSxcbiAgICB7IGxhYmVsS2V5OiAnQVNUJywgdGhyZXNob2xkczogeyBBU1Q6IDEyIH0gfSxcbiAgXSxcbiAgbmZsOiBbXG4gICAgeyBsYWJlbEtleTogJ1lEUycsIHRocmVzaG9sZHM6IHsgWURTOiAzMDAgfSB9LFxuICAgIHsgbGFiZWxLZXk6ICdURCcsIHRocmVzaG9sZHM6IHsgVEQ6IDMgfSB9LFxuICBdLFxuICBuaGw6IFtcbiAgICB7IGxhYmVsS2V5OiAnRycsIHRocmVzaG9sZHM6IHsgRzogMyB9IH0sXG4gIF0sXG4gIG1sYjogW1xuICAgIHsgbGFiZWxLZXk6ICdIUicsIHRocmVzaG9sZHM6IHsgSFI6IDMgfSB9LFxuICAgIHsgbGFiZWxLZXk6ICdSQkknLCB0aHJlc2hvbGRzOiB7IFJCSTogNSB9IH0sXG4gIF0sXG59O1xuXG5mdW5jdGlvbiBpc1N0YW5kb3V0KHNwb3J0OiBTcG9ydCwgc3RhdE1hcDogUmVjb3JkPHN0cmluZywgbnVtYmVyPik6IGJvb2xlYW4ge1xuICBjb25zdCB0aHJlc2hvbGRTZXRzID0gU1BPUlRfVEhSRVNIT0xEU1tzcG9ydF0gfHwgW107XG4gIGZvciAoY29uc3QgeyBsYWJlbEtleSwgdGhyZXNob2xkcyB9IG9mIHRocmVzaG9sZFNldHMpIHtcbiAgICBjb25zdCB2YWwgPSBzdGF0TWFwW2xhYmVsS2V5XSB8fCAwO1xuICAgIGNvbnN0IHRocmVzaG9sZCA9IHRocmVzaG9sZHNbbGFiZWxLZXldIHx8IEluZmluaXR5O1xuICAgIGlmICh2YWwgPj0gdGhyZXNob2xkKSByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIE5CQSBkb3VibGUtZG91YmxlIHdpdGggMjUrIHB0c1xuICBpZiAoc3BvcnQgPT09ICduYmEnKSB7XG4gICAgY29uc3QgcHRzID0gc3RhdE1hcFsnUFRTJ10gfHwgMDtcbiAgICBjb25zdCByZWIgPSBzdGF0TWFwWydSRUInXSB8fCAwO1xuICAgIGNvbnN0IGFzdCA9IHN0YXRNYXBbJ0FTVCddIHx8IDA7XG4gICAgaWYgKHB0cyA+PSAyNSAmJiAocmViID49IDEwIHx8IGFzdCA+PSAxMCkpIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBidWlsZFN0YXRIZWFkbGluZShzcG9ydDogU3BvcnQsIHN0YXRNYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4pOiBzdHJpbmcge1xuICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICBpZiAoc3BvcnQgPT09ICduYmEnKSB7XG4gICAgaWYgKHN0YXRNYXBbJ1BUUyddKSBwYXJ0cy5wdXNoKGAke3N0YXRNYXBbJ1BUUyddfSBQVFNgKTtcbiAgICBpZiAoc3RhdE1hcFsnUkVCJ10pIHBhcnRzLnB1c2goYCR7c3RhdE1hcFsnUkVCJ119IFJFQmApO1xuICAgIGlmIChzdGF0TWFwWydBU1QnXSkgcGFydHMucHVzaChgJHtzdGF0TWFwWydBU1QnXX0gQVNUYCk7XG4gICAgaWYgKHN0YXRNYXBbJ1NUTCddICYmIHN0YXRNYXBbJ1NUTCddID49IDMpIHBhcnRzLnB1c2goYCR7c3RhdE1hcFsnU1RMJ119IFNUTGApO1xuICAgIGlmIChzdGF0TWFwWydCTEsnXSAmJiBzdGF0TWFwWydCTEsnXSA+PSAzKSBwYXJ0cy5wdXNoKGAke3N0YXRNYXBbJ0JMSyddfSBCTEtgKTtcbiAgfSBlbHNlIGlmIChzcG9ydCA9PT0gJ25mbCcpIHtcbiAgICBpZiAoc3RhdE1hcFsnWURTJ10pIHBhcnRzLnB1c2goYCR7c3RhdE1hcFsnWURTJ119IFlEU2ApO1xuICAgIGlmIChzdGF0TWFwWydURCddKSBwYXJ0cy5wdXNoKGAke3N0YXRNYXBbJ1REJ119IFREYCk7XG4gIH0gZWxzZSBpZiAoc3BvcnQgPT09ICduaGwnKSB7XG4gICAgaWYgKHN0YXRNYXBbJ0cnXSkgcGFydHMucHVzaChgJHtzdGF0TWFwWydHJ119IEdgKTtcbiAgICBpZiAoc3RhdE1hcFsnQSddKSBwYXJ0cy5wdXNoKGAke3N0YXRNYXBbJ0EnXX0gQWApO1xuICB9IGVsc2UgaWYgKHNwb3J0ID09PSAnbWxiJykge1xuICAgIGlmIChzdGF0TWFwWydIUiddKSBwYXJ0cy5wdXNoKGAke3N0YXRNYXBbJ0hSJ119IEhSYCk7XG4gICAgaWYgKHN0YXRNYXBbJ1JCSSddKSBwYXJ0cy5wdXNoKGAke3N0YXRNYXBbJ1JCSSddfSBSQklgKTtcbiAgICBpZiAoc3RhdE1hcFsnSCddKSBwYXJ0cy5wdXNoKGAke3N0YXRNYXBbJ0gnXX0gSGApO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJyB8ICcpIHx8ICdHcmVhdCBHYW1lJztcbn1cblxuYXN5bmMgZnVuY3Rpb24gYnVpbGRQbGF5ZXJQZXJmb3JtYW5jZXMoXG4gIGRhdGVzOiBzdHJpbmdbXSxcbiAgYWxsR2FtZXM6IEdhbWVbXSxcbiAgbWF4UG9zdHMgPSAyMFxuKTogUHJvbWlzZTxGZWVkUG9zdFtdPiB7XG4gIGNvbnN0IGZpbmFsR2FtZXMgPSBhbGxHYW1lcy5maWx0ZXIoKGcpID0+IGcuc3RhdHVzID09PSAnZmluYWwnKTtcbiAgY29uc3QgcG9zdHM6IEZlZWRQb3N0W10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGdhbWUgb2YgZmluYWxHYW1lcykge1xuICAgIGlmIChwb3N0cy5sZW5ndGggPj0gbWF4UG9zdHMpIGJyZWFrO1xuXG4gICAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgICBjb25zdCBjYWNoZUtleSA9IGBwZXJmLSR7Z2FtZS5pZH1gO1xuICAgIGNvbnN0IGNhY2hlZCA9IHJlYWRHYW1lQ2FjaGUoY2FjaGVLZXkpO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gY2FjaGVkIGFzIHsgZGF0YTogRmVlZFBvc3RbXSB9O1xuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBvc3RzLnB1c2goLi4uZGF0YSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gQ2FjaGVkIGFzIGVtcHR5ID0gbm8gc3RhbmRvdXRzXG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA9PT0gMCkgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3VtbWFyeSA9IGF3YWl0IGZldGNoR2FtZVN1bW1hcnkoZ2FtZS5zcG9ydCwgZ2FtZS5pZCk7XG4gICAgaWYgKCFzdW1tYXJ5Py5ib3hzY29yZT8ucGxheWVycykge1xuICAgICAgd3JpdGVHYW1lQ2FjaGUoY2FjaGVLZXksIFtdKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGdhbWVQb3N0czogRmVlZFBvc3RbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCB0ZWFtU3RhdHMgb2Ygc3VtbWFyeS5ib3hzY29yZS5wbGF5ZXJzKSB7XG4gICAgICBpZiAoIXRlYW1TdGF0cy5zdGF0aXN0aWNzPy5bMF0pIGNvbnRpbnVlO1xuXG4gICAgICBjb25zdCBsYWJlbHMgPSB0ZWFtU3RhdHMuc3RhdGlzdGljc1swXS5sYWJlbHM7XG4gICAgICBjb25zdCBhdGhsZXRlcyA9IHRlYW1TdGF0cy5zdGF0aXN0aWNzWzBdLmF0aGxldGVzO1xuXG4gICAgICBmb3IgKGNvbnN0IGF0aGxldGUgb2YgYXRobGV0ZXMpIHtcbiAgICAgICAgY29uc3Qgc3RhdE1hcDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgICAgICBsYWJlbHMuZm9yRWFjaCgobGFiZWwsIGlkeCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IHBhcnNlRmxvYXQoYXRobGV0ZS5zdGF0c1tpZHhdKTtcbiAgICAgICAgICBpZiAoIWlzTmFOKHZhbCkpIHN0YXRNYXBbbGFiZWxdID0gdmFsO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoaXNTdGFuZG91dChnYW1lLnNwb3J0LCBzdGF0TWFwKSkge1xuICAgICAgICAgIC8vIERldGVybWluZSBvcHBvbmVudFxuICAgICAgICAgIGNvbnN0IGlzSG9tZVRlYW0gPSB0ZWFtU3RhdHMudGVhbS5hYmJyZXZpYXRpb24gPT09IGdhbWUuaG9tZVRlYW0uYWJicmV2aWF0aW9uO1xuICAgICAgICAgIGNvbnN0IG9wcG9uZW50ID0gaXNIb21lVGVhbSA/IGdhbWUuYXdheVRlYW0gOiBnYW1lLmhvbWVUZWFtO1xuICAgICAgICAgIGNvbnN0IGlzV2luID0gaXNIb21lVGVhbVxuICAgICAgICAgICAgPyAoZ2FtZS5ob21lU2NvcmUgfHwgMCkgPiAoZ2FtZS5hd2F5U2NvcmUgfHwgMClcbiAgICAgICAgICAgIDogKGdhbWUuYXdheVNjb3JlIHx8IDApID4gKGdhbWUuaG9tZVNjb3JlIHx8IDApO1xuXG4gICAgICAgICAgY29uc3QgcGxheWVySW1hZ2VVcmwgPSBhdGhsZXRlLmF0aGxldGUuaGVhZHNob3Q/LmhyZWZcbiAgICAgICAgICAgIHx8IGdldFBsYXllckhlYWRzaG90VXJsKGdhbWUuc3BvcnQsIGF0aGxldGUuYXRobGV0ZS5pZCk7XG5cbiAgICAgICAgICBjb25zdCBkYXRhOiBQbGF5ZXJQZXJmb3JtYW5jZURhdGEgPSB7XG4gICAgICAgICAgICBwbGF5ZXJOYW1lOiBhdGhsZXRlLmF0aGxldGUuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBwbGF5ZXJJbWFnZVVybCxcbiAgICAgICAgICAgIHRlYW1BYmJyZXZpYXRpb246IHRlYW1TdGF0cy50ZWFtLmFiYnJldmlhdGlvbixcbiAgICAgICAgICAgIHRlYW1Mb2dvOiB0ZWFtU3RhdHMudGVhbS5sb2dvLFxuICAgICAgICAgICAgc3BvcnQ6IGdhbWUuc3BvcnQsXG4gICAgICAgICAgICBzdGF0czogc3RhdE1hcCxcbiAgICAgICAgICAgIGhlYWRsaW5lOiBidWlsZFN0YXRIZWFkbGluZShnYW1lLnNwb3J0LCBzdGF0TWFwKSxcbiAgICAgICAgICAgIGdhbWVJZDogZ2FtZS5pZCxcbiAgICAgICAgICAgIG9wcG9uZW50QWJicmV2aWF0aW9uOiBvcHBvbmVudC5hYmJyZXZpYXRpb24sXG4gICAgICAgICAgICBnYW1lRGF0ZTogZ2FtZS5kYXRlLFxuICAgICAgICAgICAgaXNXaW4sXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGdhbWVQb3N0cy5wdXNoKHtcbiAgICAgICAgICAgIGlkOiBgcGVyZi0ke2dhbWUuaWR9LSR7YXRobGV0ZS5hdGhsZXRlLmlkfWAsXG4gICAgICAgICAgICB0eXBlOiAncGxheWVyX3BlcmZvcm1hbmNlJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoZ2FtZS5zdGFydFRpbWUpLmdldFRpbWUoKSxcbiAgICAgICAgICAgIHNwb3J0OiBnYW1lLnNwb3J0LFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHdyaXRlR2FtZUNhY2hlKGNhY2hlS2V5LCBnYW1lUG9zdHMpO1xuICAgIHBvc3RzLnB1c2goLi4uZ2FtZVBvc3RzKTtcbiAgfVxuXG4gIHJldHVybiBwb3N0cy5zbGljZSgwLCBtYXhQb3N0cyk7XG59XG5cbi8vIC0tLSBHYW1lIFJlc3VsdHMgLS0tXG5cbmZ1bmN0aW9uIGJ1aWxkR2FtZVJlc3VsdHMoZ2FtZXM6IEdhbWVbXSwgZGF0ZXM6IHN0cmluZ1tdKTogRmVlZFBvc3RbXSB7XG4gIGNvbnN0IHBvc3RzOiBGZWVkUG9zdFtdID0gW107XG5cbiAgZm9yIChjb25zdCBnYW1lIG9mIGdhbWVzKSB7XG4gICAgaWYgKGdhbWUuc3RhdHVzICE9PSAnZmluYWwnKSBjb250aW51ZTtcbiAgICBpZiAoZ2FtZS5ob21lU2NvcmUgPT09IG51bGwgfHwgZ2FtZS5hd2F5U2NvcmUgPT09IG51bGwpIGNvbnRpbnVlO1xuXG4gICAgY29uc3Qgd2lubmVySWQgPSBnYW1lLmhvbWVTY29yZSA+IGdhbWUuYXdheVNjb3JlID8gZ2FtZS5ob21lVGVhbS5pZCA6IGdhbWUuYXdheVRlYW0uaWQ7XG4gICAgY29uc3Qgd2lubmVyID0gZ2FtZS5ob21lU2NvcmUgPiBnYW1lLmF3YXlTY29yZSA/IGdhbWUuaG9tZVRlYW0gOiBnYW1lLmF3YXlUZWFtO1xuXG4gICAgLy8gR2V0IHBpY2tzIGZvciB0aGlzIGdhbWUncyBkYXRlXG4gICAgY29uc3QgZ2FtZVBpY2tzID0gZ2V0UGlja3NCeURhdGUoZ2FtZS5kYXRlKS5maWx0ZXIoKHApID0+IHAuZ2FtZUlkID09PSBnYW1lLmlkKTtcbiAgICBpZiAoZ2FtZVBpY2tzLmxlbmd0aCA9PT0gMCkgY29udGludWU7XG5cbiAgICBjb25zdCBlbnRyaWVzOiBHYW1lUmVzdWx0UGlja0VudHJ5W10gPSBnYW1lUGlja3Muc2xpY2UoMCwgNSkubWFwKChwKSA9PiB7XG4gICAgICBjb25zdCBpc0hvbWUgPSBwLnBpY2tlZFRlYW1JZCA9PT0gZ2FtZS5ob21lVGVhbS5pZDtcbiAgICAgIGNvbnN0IHBpY2tlZFRlYW0gPSBpc0hvbWUgPyBnYW1lLmhvbWVUZWFtIDogZ2FtZS5hd2F5VGVhbTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXJuYW1lOiBwLnVzZXJuYW1lLFxuICAgICAgICBwaWNrZWRUZWFtSWQ6IHAucGlja2VkVGVhbUlkLFxuICAgICAgICBwaWNrZWRUZWFtQWJicmV2aWF0aW9uOiBwaWNrZWRUZWFtLmFiYnJldmlhdGlvbixcbiAgICAgICAgcGlja2VkVGVhbUxvZ286IHBpY2tlZFRlYW0ubG9nbyxcbiAgICAgICAgY29ycmVjdDogcC5waWNrZWRUZWFtSWQgPT09IHdpbm5lcklkLFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGRhdGE6IEdhbWVSZXN1bHREYXRhID0ge1xuICAgICAgZ2FtZUlkOiBnYW1lLmlkLFxuICAgICAgc3BvcnQ6IGdhbWUuc3BvcnQsXG4gICAgICBob21lVGVhbTogZ2FtZS5ob21lVGVhbSxcbiAgICAgIGF3YXlUZWFtOiBnYW1lLmF3YXlUZWFtLFxuICAgICAgaG9tZVNjb3JlOiBnYW1lLmhvbWVTY29yZSxcbiAgICAgIGF3YXlTY29yZTogZ2FtZS5hd2F5U2NvcmUsXG4gICAgICBnYW1lRGF0ZTogZ2FtZS5kYXRlLFxuICAgICAgd2lubmVyQWJicmV2aWF0aW9uOiB3aW5uZXIuYWJicmV2aWF0aW9uLFxuICAgICAgY29ycmVjdFBpY2tlcnM6IGVudHJpZXMuZmlsdGVyKChlKSA9PiBlLmNvcnJlY3QpLFxuICAgICAgdG90YWxQaWNrZXJzOiBnYW1lUGlja3MubGVuZ3RoLFxuICAgIH07XG5cbiAgICBwb3N0cy5wdXNoKHtcbiAgICAgIGlkOiBgZ2FtZXJlc3VsdC0ke2dhbWUuaWR9YCxcbiAgICAgIHR5cGU6ICdnYW1lX3Jlc3VsdCcsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKGdhbWUuc3RhcnRUaW1lKS5nZXRUaW1lKCkgKyAzICogMzYwMDAwMCwgLy8gfjNoIGFmdGVyIHN0YXJ0IChhcHByb3ggZmluYWwgdGltZSlcbiAgICAgIHNwb3J0OiBnYW1lLnNwb3J0LFxuICAgICAgZGF0YSxcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBwb3N0cztcbn1cblxuLy8gLS0tIE5ld3MgLS0tXG5cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkTmV3c1Bvc3RzKCk6IFByb21pc2U8RmVlZFBvc3RbXT4ge1xuICB0eXBlIFJhd0FydGljbGUgPSB7XG4gICAgYXJ0aWNsZTogeyBoZWFkbGluZTogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nOyBwdWJsaXNoZWQ6IHN0cmluZzsgbGlua3M6IHsgd2ViOiB7IGhyZWY6IHN0cmluZyB9IH07IGltYWdlcz86IEFycmF5PHsgdXJsOiBzdHJpbmcgfT4gfTtcbiAgICBzcG9ydDogU3BvcnQ7XG4gICAgdGVhbUFiYnJldmlhdGlvbnM6IHN0cmluZ1tdO1xuICB9O1xuXG4gIGNvbnN0IGFsbEFydGljbGVzOiBSYXdBcnRpY2xlW10gPSBbXTtcblxuICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICBTUE9SVF9DT05GSUdTLm1hcChhc3luYyAoeyBzcG9ydCB9KSA9PiB7XG4gICAgICAvLyBHZW5lcmFsIGxlYWd1ZSBuZXdzIChubyB0ZWFtIHRhZylcbiAgICAgIGNvbnN0IGxlYWd1ZUFydGljbGVzID0gYXdhaXQgZmV0Y2hTcG9ydE5ld3Moc3BvcnQpO1xuICAgICAgZm9yIChjb25zdCBhcnRpY2xlIG9mIGxlYWd1ZUFydGljbGVzLnNsaWNlKDAsIDUpKSB7XG4gICAgICAgIGFsbEFydGljbGVzLnB1c2goeyBhcnRpY2xlLCBzcG9ydCwgdGVhbUFiYnJldmlhdGlvbnM6IFtdIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBQZXItdGVhbSBuZXdzIOKAlCBmZXRjaCBhbGwgdGVhbXMgZm9yIHRoaXMgc3BvcnQgaW4gYmF0Y2hlcyBvZiA4XG4gICAgICBjb25zdCB0ZWFtcyA9IGF3YWl0IGZldGNoVGVhbXMoc3BvcnQpO1xuICAgICAgY29uc3QgQkFUQ0ggPSA4O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZWFtcy5sZW5ndGg7IGkgKz0gQkFUQ0gpIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSB0ZWFtcy5zbGljZShpLCBpICsgQkFUQ0gpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICBiYXRjaC5tYXAoYXN5bmMgKHRlYW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRlYW1BcnRpY2xlcyA9IGF3YWl0IGZldGNoVGVhbU5ld3Moc3BvcnQsIHRlYW0uaWQpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBhcnRpY2xlIG9mIHRlYW1BcnRpY2xlcy5zbGljZSgwLCAyKSkge1xuICAgICAgICAgICAgICBhbGxBcnRpY2xlcy5wdXNoKHsgYXJ0aWNsZSwgc3BvcnQsIHRlYW1BYmJyZXZpYXRpb25zOiBbdGVhbS5hYmJyZXZpYXRpb25dIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSlcbiAgKTtcblxuICAvLyBEZWR1cGxpY2F0ZSBieSBsaW5rIFVSTCDigJQgc2FtZSBhcnRpY2xlIGNhbiBhcHBlYXIgZm9yIG11bHRpcGxlIHRlYW1zOyBtZXJnZSB0aGVpciBhYmJyZXZpYXRpb25zXG4gIGNvbnN0IGJ5TGluayA9IG5ldyBNYXA8c3RyaW5nLCBSYXdBcnRpY2xlPigpO1xuICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWxsQXJ0aWNsZXMpIHtcbiAgICBjb25zdCBrZXkgPSBpdGVtLmFydGljbGUubGlua3M/LndlYj8uaHJlZiB8fCBpdGVtLmFydGljbGUuaGVhZGxpbmU7XG4gICAgY29uc3QgZXhpc3RpbmcgPSBieUxpbmsuZ2V0KGtleSk7XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBleGlzdGluZy50ZWFtQWJicmV2aWF0aW9ucyA9IEFycmF5LmZyb20oXG4gICAgICAgIG5ldyBTZXQoWy4uLmV4aXN0aW5nLnRlYW1BYmJyZXZpYXRpb25zLCAuLi5pdGVtLnRlYW1BYmJyZXZpYXRpb25zXSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ5TGluay5zZXQoa2V5LCB7IC4uLml0ZW0sIHRlYW1BYmJyZXZpYXRpb25zOiBbLi4uaXRlbS50ZWFtQWJicmV2aWF0aW9uc10gfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZGVkdXBlZCA9IEFycmF5LmZyb20oYnlMaW5rLnZhbHVlcygpKTtcblxuICAvLyBTb3J0IGJ5IHB1Ymxpc2hlZCBkYXRlIGRlc2NlbmRpbmdcbiAgZGVkdXBlZC5zb3J0KFxuICAgIChhLCBiKSA9PiBuZXcgRGF0ZShiLmFydGljbGUucHVibGlzaGVkKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmFydGljbGUucHVibGlzaGVkKS5nZXRUaW1lKClcbiAgKTtcblxuICByZXR1cm4gZGVkdXBlZC5tYXAoKHsgYXJ0aWNsZSwgc3BvcnQsIHRlYW1BYmJyZXZpYXRpb25zIH0pID0+IHtcbiAgICBjb25zdCBkYXRhOiBOZXdzRGF0YSA9IHtcbiAgICAgIGhlYWRsaW5lOiBhcnRpY2xlLmhlYWRsaW5lLFxuICAgICAgZGVzY3JpcHRpb246IGFydGljbGUuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICBpbWFnZVVybDogYXJ0aWNsZS5pbWFnZXM/LlswXT8udXJsLFxuICAgICAgbGlua1VybDogYXJ0aWNsZS5saW5rcz8ud2ViPy5ocmVmIHx8ICcnLFxuICAgICAgc3BvcnQsXG4gICAgICBwdWJsaXNoZWQ6IGFydGljbGUucHVibGlzaGVkLFxuICAgICAgdGVhbUFiYnJldmlhdGlvbnMsXG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogYG5ld3MtJHtzcG9ydH0tJHtuZXcgRGF0ZShhcnRpY2xlLnB1Ymxpc2hlZCkuZ2V0VGltZSgpfS0ke3RlYW1BYmJyZXZpYXRpb25zLmpvaW4oJy0nKX1gLFxuICAgICAgdHlwZTogJ25ld3MnIGFzIGNvbnN0LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShhcnRpY2xlLnB1Ymxpc2hlZCkuZ2V0VGltZSgpLFxuICAgICAgc3BvcnQsXG4gICAgICBkYXRhLFxuICAgIH07XG4gIH0pO1xufVxuXG4vLyAtLS0gTWFpbiBoYW5kbGVyIC0tLVxuLy8gUGFnaW5hdGlvbiBpcyBkYXRlLWJhc2VkOiBlYWNoIHBhZ2UgY292ZXJzIGEgd2luZG93IG9mIERBWVNfUEVSX1BBR0UgZGF5cy5cbi8vIGRheXNPZmZzZXQ9MCDihpIgdG9kYXkuLjQgZGF5cyBhZ28sIGRheXNPZmZzZXQ9NSDihpIgNS4uOSBkYXlzIGFnbywgZXRjLlxuLy8gTWF4IGxvb2tiYWNrIGlzIDUwIGRheXMuXG5cbmNvbnN0IERBWVNfUEVSX1BBR0UgPSA1O1xuY29uc3QgTUFYX0RBWVMgPSA1MDtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IGRheXNPZmZzZXQgPSBNYXRoLm1heCgwLCBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdkYXlzT2Zmc2V0JykgfHwgJzAnLCAxMCkpO1xuXG4gICAgY29uc3QgdG9kYXkgPSB0b2RheVN0cmluZygpO1xuXG4gICAgLy8gQ2xhbXAgc28gd2UgbmV2ZXIgZ28gYmV5b25kIDUwIGRheXMgYmFja1xuICAgIGNvbnN0IHdpbmRvd1N0YXJ0ID0gZGF5c09mZnNldDtcbiAgICBjb25zdCB3aW5kb3dFbmQgPSBNYXRoLm1pbihkYXlzT2Zmc2V0ICsgREFZU19QRVJfUEFHRSAtIDEsIE1BWF9EQVlTIC0gMSk7XG4gICAgY29uc3QgaGFzTW9yZSA9IHdpbmRvd0VuZCA8IE1BWF9EQVlTIC0gMTtcblxuICAgIC8vIEJ1aWxkIHRoZSBsaXN0IG9mIGRhdGVzIGZvciB0aGlzIHdpbmRvd1xuICAgIGNvbnN0IGRhdGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSB3aW5kb3dTdGFydDsgaSA8PSB3aW5kb3dFbmQ7IGkrKykge1xuICAgICAgZGF0ZXMucHVzaChhZGREYXlzKHRvZGF5LCAtaSkpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIHBlci13aW5kb3cgY2FjaGUgKDEwIG1pbiBUVEwgZm9yIHJlY2VudCBwYWdlcywgcGVybWFuZW50IGZvciBvbGQgb25lcylcbiAgICBjb25zdCBjYWNoZUtleSA9IGBmZWVkLXdpbmRvdy0ke2RheXNPZmZzZXR9YDtcbiAgICBjb25zdCBjYWNoZWQgPSByZWFkR2FtZUNhY2hlKGNhY2hlS2V5KTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGFnZU1pbnV0ZXMgfSA9IGNhY2hlZCBhcyB7IGRhdGE6IEZlZWRQb3N0W107IGFnZU1pbnV0ZXM6IG51bWJlciB9O1xuICAgICAgLy8gT2xkIHdpbmRvd3MgKD41IGRheXMgYWdvKSBhcmUgZWZmZWN0aXZlbHkgaW1tdXRhYmxlIOKAlCBjYWNoZSBmb3JldmVyXG4gICAgICBjb25zdCB0dGwgPSBkYXlzT2Zmc2V0ID49IDUgPyBJbmZpbml0eSA6IDEwO1xuICAgICAgaWYgKGFnZU1pbnV0ZXMgPCB0dGwpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgcG9zdHM6IGRhdGEsIGhhc01vcmUgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmV0Y2ggZ2FtZXMgZm9yIGFsbCBkYXRlcyBpbiB0aGlzIHdpbmRvdyBpbiBwYXJhbGxlbFxuICAgIGNvbnN0IGdhbWVzQnlEYXRlID0gYXdhaXQgUHJvbWlzZS5hbGwoZGF0ZXMubWFwKChkKSA9PiBmZXRjaEdhbWVzKGQpKSk7XG4gICAgY29uc3Qgd2luZG93R2FtZXMgPSBnYW1lc0J5RGF0ZS5mbGF0KCk7XG4gICAgY29uc3QgdG9kYXlHYW1lcyA9IGRheXNPZmZzZXQgPT09IDAgPyBnYW1lc0J5RGF0ZVswXSA6IFtdO1xuXG4gICAgLy8gQnVpbGQgcG9zdCB0eXBlc1xuICAgIGNvbnN0IFt0cmVuZGluZ1BpY2ssIGhvdFBpY2tzUG9zdCwgbmV3c1Bvc3RzLCBwbGF5ZXJQb3N0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBkYXlzT2Zmc2V0ID09PSAwID8gYnVpbGRUcmVuZGluZ1BpY2sodG9kYXlHYW1lcykgOiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICBkYXlzT2Zmc2V0ID09PSAwID8gYnVpbGRIb3RQaWNrcyh0b2RheUdhbWVzKSA6IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgIGRheXNPZmZzZXQgPT09IDAgPyBidWlsZE5ld3NQb3N0cygpIDogUHJvbWlzZS5yZXNvbHZlKFtdKSxcbiAgICAgIGJ1aWxkUGxheWVyUGVyZm9ybWFuY2VzKGRhdGVzLCB3aW5kb3dHYW1lcywgMjApLFxuICAgIF0pO1xuXG4gICAgY29uc3QgYmlnR2FtZVBvc3RzID0gYnVpbGRCaWdHYW1lcyh3aW5kb3dHYW1lcyk7XG4gICAgY29uc3QgZ2FtZVJlc3VsdFBvc3RzID0gYnVpbGRHYW1lUmVzdWx0cyh3aW5kb3dHYW1lcywgZGF0ZXMpO1xuXG4gICAgY29uc3QgcG9zdHM6IEZlZWRQb3N0W10gPSBbXTtcbiAgICBpZiAodHJlbmRpbmdQaWNrKSBwb3N0cy5wdXNoKHRyZW5kaW5nUGljayk7XG4gICAgaWYgKGhvdFBpY2tzUG9zdCkgcG9zdHMucHVzaChob3RQaWNrc1Bvc3QpO1xuICAgIHBvc3RzLnB1c2goLi4uYmlnR2FtZVBvc3RzKTtcbiAgICBwb3N0cy5wdXNoKC4uLmdhbWVSZXN1bHRQb3N0cyk7XG4gICAgcG9zdHMucHVzaCguLi5wbGF5ZXJQb3N0cyk7XG4gICAgcG9zdHMucHVzaCguLi5uZXdzUG9zdHMpO1xuXG4gICAgLy8gU29ydCBuZXdlc3QgZmlyc3Qgd2l0aGluIHRoaXMgd2luZG93XG4gICAgcG9zdHMuc29ydCgoYSwgYikgPT4gYi50aW1lc3RhbXAgLSBhLnRpbWVzdGFtcCk7XG5cbiAgICB3cml0ZUdhbWVDYWNoZShjYWNoZUtleSwgcG9zdHMpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgcG9zdHMsIGhhc01vcmUgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmVlZCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgcG9zdHM6IFtdLCBoYXNNb3JlOiBmYWxzZSB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImR5bmFtaWMiLCJmZXRjaEdhbWVzIiwiZmV0Y2hHYW1lU3VtbWFyeSIsImZldGNoU3BvcnROZXdzIiwiZmV0Y2hUZWFtTmV3cyIsImZldGNoVGVhbXMiLCJTUE9SVF9DT05GSUdTIiwiZ2V0UGxheWVySGVhZHNob3RVcmwiLCJnZXRQaWNrc0J5RGF0ZSIsInRvZGF5U3RyaW5nIiwiYWRkRGF5cyIsInBhcnNlUmVjb3JkIiwicmVhZEdhbWVDYWNoZSIsIndyaXRlR2FtZUNhY2hlIiwiYnVpbGRUcmVuZGluZ1BpY2siLCJnYW1lcyIsInRvZGF5IiwicGlja3MiLCJsZW5ndGgiLCJ0ZWFtQ291bnRzIiwiZ2FtZUNvdW50cyIsInBpY2siLCJwaWNrZWRUZWFtSWQiLCJnYW1lSWQiLCJ0b3BUZWFtSWQiLCJ0b3BDb3VudCIsInRlYW1JZCIsImNvdW50IiwiT2JqZWN0IiwiZW50cmllcyIsImdhbWUiLCJmaW5kIiwiZyIsImhvbWVUZWFtIiwiaWQiLCJhd2F5VGVhbSIsImlzSG9tZSIsInBpY2tlZFRlYW0iLCJvcHBvbmVudCIsImRhdGEiLCJ0ZWFtTmFtZSIsImRpc3BsYXlOYW1lIiwidGVhbUFiYnJldmlhdGlvbiIsImFiYnJldmlhdGlvbiIsInRlYW1Mb2dvIiwibG9nbyIsIm9wcG9uZW50TmFtZSIsIm9wcG9uZW50QWJicmV2aWF0aW9uIiwib3Bwb25lbnRMb2dvIiwicGlja0NvdW50IiwidG90YWxQaWNrc0ZvckdhbWUiLCJnYW1lRGF0ZSIsImRhdGUiLCJzdGFydFRpbWUiLCJzcG9ydCIsInR5cGUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwiYnVpbGRIb3RQaWNrcyIsImdhbWVNYXAiLCJNYXAiLCJtYXAiLCJzZWVuVXNlcnMiLCJTZXQiLCJoYXMiLCJ1c2VybmFtZSIsImdldCIsInB1c2giLCJwaWNrZWRUZWFtTmFtZSIsInBpY2tlZFRlYW1BYmJyZXZpYXRpb24iLCJwaWNrZWRUZWFtTG9nbyIsImFkZCIsImhlYWRsaW5lIiwic2NvcmVCaWdHYW1lIiwic2NvcmUiLCJob21lUmVjIiwicmVjb3JkIiwiYXdheVJlYyIsImhvbWVHYW1lcyIsIndpbnMiLCJsb3NzZXMiLCJhd2F5R2FtZXMiLCJob21lV2luUGN0IiwiYXdheVdpblBjdCIsIndpblBjdERpZmYiLCJNYXRoIiwiYWJzIiwiaG9tZVNjb3JlIiwiYXdheVNjb3JlIiwiZGlmZiIsInN0YXR1cyIsImdldEJpZ0dhbWVIZWFkbGluZSIsImJ1aWxkQmlnR2FtZXMiLCJzY29yZWQiLCJmaWx0ZXIiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsIlNQT1JUX1RIUkVTSE9MRFMiLCJuYmEiLCJsYWJlbEtleSIsInRocmVzaG9sZHMiLCJQVFMiLCJSRUIiLCJBU1QiLCJuZmwiLCJZRFMiLCJURCIsIm5obCIsIkciLCJtbGIiLCJIUiIsIlJCSSIsImlzU3RhbmRvdXQiLCJzdGF0TWFwIiwidGhyZXNob2xkU2V0cyIsInZhbCIsInRocmVzaG9sZCIsIkluZmluaXR5IiwicHRzIiwicmViIiwiYXN0IiwiYnVpbGRTdGF0SGVhZGxpbmUiLCJwYXJ0cyIsImpvaW4iLCJidWlsZFBsYXllclBlcmZvcm1hbmNlcyIsImRhdGVzIiwiYWxsR2FtZXMiLCJtYXhQb3N0cyIsImZpbmFsR2FtZXMiLCJwb3N0cyIsImNhY2hlS2V5IiwiY2FjaGVkIiwic3VtbWFyeSIsImJveHNjb3JlIiwicGxheWVycyIsImdhbWVQb3N0cyIsInRlYW1TdGF0cyIsInN0YXRpc3RpY3MiLCJsYWJlbHMiLCJhdGhsZXRlcyIsImF0aGxldGUiLCJmb3JFYWNoIiwibGFiZWwiLCJpZHgiLCJwYXJzZUZsb2F0Iiwic3RhdHMiLCJpc05hTiIsImlzSG9tZVRlYW0iLCJ0ZWFtIiwiaXNXaW4iLCJwbGF5ZXJJbWFnZVVybCIsImhlYWRzaG90IiwiaHJlZiIsInBsYXllck5hbWUiLCJnZXRUaW1lIiwiYnVpbGRHYW1lUmVzdWx0cyIsIndpbm5lcklkIiwid2lubmVyIiwiZ2FtZVBpY2tzIiwicCIsImNvcnJlY3QiLCJ3aW5uZXJBYmJyZXZpYXRpb24iLCJjb3JyZWN0UGlja2VycyIsImUiLCJ0b3RhbFBpY2tlcnMiLCJidWlsZE5ld3NQb3N0cyIsImFsbEFydGljbGVzIiwiUHJvbWlzZSIsImFsbCIsImxlYWd1ZUFydGljbGVzIiwiYXJ0aWNsZSIsInRlYW1BYmJyZXZpYXRpb25zIiwidGVhbXMiLCJCQVRDSCIsImkiLCJiYXRjaCIsInRlYW1BcnRpY2xlcyIsImJ5TGluayIsIml0ZW0iLCJrZXkiLCJsaW5rcyIsIndlYiIsImV4aXN0aW5nIiwiQXJyYXkiLCJmcm9tIiwic2V0IiwiZGVkdXBlZCIsInZhbHVlcyIsInB1Ymxpc2hlZCIsImRlc2NyaXB0aW9uIiwiaW1hZ2VVcmwiLCJpbWFnZXMiLCJ1cmwiLCJsaW5rVXJsIiwiREFZU19QRVJfUEFHRSIsIk1BWF9EQVlTIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsImRheXNPZmZzZXQiLCJtYXgiLCJwYXJzZUludCIsIndpbmRvd1N0YXJ0Iiwid2luZG93RW5kIiwibWluIiwiaGFzTW9yZSIsImFnZU1pbnV0ZXMiLCJ0dGwiLCJqc29uIiwiZ2FtZXNCeURhdGUiLCJkIiwid2luZG93R2FtZXMiLCJmbGF0IiwidG9kYXlHYW1lcyIsInRyZW5kaW5nUGljayIsImhvdFBpY2tzUG9zdCIsIm5ld3NQb3N0cyIsInBsYXllclBvc3RzIiwicmVzb2x2ZSIsImJpZ0dhbWVQb3N0cyIsImdhbWVSZXN1bHRQb3N0cyIsImVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/feed/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/espn.ts":
/*!*************************!*\
  !*** ./src/lib/espn.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SPORT_CONFIGS: () => (/* binding */ SPORT_CONFIGS),\n/* harmony export */   fetchGameSummary: () => (/* binding */ fetchGameSummary),\n/* harmony export */   fetchGames: () => (/* binding */ fetchGames),\n/* harmony export */   fetchSportNews: () => (/* binding */ fetchSportNews),\n/* harmony export */   fetchTeamNews: () => (/* binding */ fetchTeamNews),\n/* harmony export */   fetchTeams: () => (/* binding */ fetchTeams),\n/* harmony export */   getESPNPath: () => (/* binding */ getESPNPath),\n/* harmony export */   getPlayerHeadshotUrl: () => (/* binding */ getPlayerHeadshotUrl)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(rsc)/./src/lib/utils.ts\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./storage */ \"(rsc)/./src/lib/storage.ts\");\n\n\nconst ESPN_BASE = \"https://site.api.espn.com/apis/site/v2/sports\";\nconst SPORT_CONFIGS = [\n    {\n        sport: \"nba\",\n        path: \"basketball/nba\"\n    },\n    {\n        sport: \"mlb\",\n        path: \"baseball/mlb\"\n    },\n    {\n        sport: \"nfl\",\n        path: \"football/nfl\"\n    },\n    {\n        sport: \"nhl\",\n        path: \"hockey/nhl\"\n    }\n];\nfunction parseTeam(competitor) {\n    return {\n        id: competitor.team.id,\n        name: competitor.team.name,\n        displayName: competitor.team.displayName,\n        abbreviation: competitor.team.abbreviation,\n        logo: competitor.team.logo,\n        record: competitor.records?.[0]?.summary || \"0-0\"\n    };\n}\nfunction parseStatus(status) {\n    if (status.type.completed) return \"final\";\n    if (status.type.name === \"STATUS_IN_PROGRESS\") return \"in_progress\";\n    return \"scheduled\";\n}\nfunction parseGame(event, sport) {\n    const comp = event.competitions[0];\n    const home = comp.competitors.find((c)=>c.homeAway === \"home\");\n    const away = comp.competitors.find((c)=>c.homeAway === \"away\");\n    return {\n        id: event.id,\n        sport,\n        date: event.date.split(\"T\")[0],\n        homeTeam: parseTeam(home),\n        awayTeam: parseTeam(away),\n        homeScore: home.score ? parseInt(home.score) : null,\n        awayScore: away.score ? parseInt(away.score) : null,\n        status: parseStatus(comp.status),\n        startTime: event.date\n    };\n}\nasync function fetchSportGames(sport, path, date) {\n    const cacheKey = `${sport}-${date}`;\n    const cached = (0,_storage__WEBPACK_IMPORTED_MODULE_1__.readGameCache)(cacheKey);\n    if (cached) {\n        const { data, ageMinutes } = cached;\n        const allFinal = data.length > 0 && data.every((g)=>g.status === \"final\");\n        if (allFinal || ageMinutes < 5) {\n            return data;\n        }\n    }\n    const espnDate = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toESPNDate)(date);\n    const url = `${ESPN_BASE}/${path}/scoreboard?dates=${espnDate}`;\n    try {\n        const res = await fetch(url);\n        if (!res.ok) {\n            if (cached) return cached.data;\n            return [];\n        }\n        const json = await res.json();\n        const events = json.events || [];\n        const games = events.map((e)=>parseGame(e, sport));\n        (0,_storage__WEBPACK_IMPORTED_MODULE_1__.writeGameCache)(cacheKey, games);\n        return games;\n    } catch  {\n        if (cached) return cached.data;\n        return [];\n    }\n}\nasync function fetchGames(date) {\n    const results = await Promise.all(SPORT_CONFIGS.map(({ sport, path })=>fetchSportGames(sport, path, date)));\n    return results.flat();\n}\nfunction getESPNPath(sport) {\n    return SPORT_CONFIGS.find((c)=>c.sport === sport).path;\n}\n\nasync function fetchTeams(sport) {\n    const cfg = SPORT_CONFIGS.find((c)=>c.sport === sport);\n    if (!cfg) return [];\n    const url = `${ESPN_BASE}/${cfg.path}/teams`;\n    try {\n        const res = await fetch(url);\n        if (!res.ok) return [];\n        const json = await res.json();\n        const entries = json.sports?.[0]?.leagues?.[0]?.teams || [];\n        return entries.map((e)=>({\n                id: e.team.id,\n                name: e.team.displayName,\n                abbreviation: e.team.abbreviation,\n                logo: e.team.logos?.[0]?.href || \"\",\n                sport\n            }));\n    } catch  {\n        return [];\n    }\n}\nconst SPORT_HEADSHOT_PATHS = {\n    nba: \"nba/players\",\n    mlb: \"mlb/players\",\n    nfl: \"nfl/players\",\n    nhl: \"nhl/players\"\n};\nfunction getPlayerHeadshotUrl(sport, athleteId) {\n    const path = SPORT_HEADSHOT_PATHS[sport];\n    return `https://a.espncdn.com/i/headshots/${path}/full/${athleteId}.png`;\n}\nasync function fetchGameSummary(sport, gameId) {\n    const path = getESPNPath(sport);\n    const url = `${ESPN_BASE}/${path}/summary?event=${gameId}`;\n    try {\n        const res = await fetch(url);\n        if (!res.ok) return null;\n        const json = await res.json();\n        return json;\n    } catch  {\n        return null;\n    }\n}\nasync function fetchSportNews(sport) {\n    const path = getESPNPath(sport);\n    const url = `${ESPN_BASE}/${path}/news?limit=5`;\n    try {\n        const res = await fetch(url);\n        if (!res.ok) return [];\n        const json = await res.json();\n        return json.articles || [];\n    } catch  {\n        return [];\n    }\n}\nasync function fetchTeamNews(sport, teamId) {\n    const path = getESPNPath(sport);\n    const url = `${ESPN_BASE}/${path}/news?limit=5&team=${teamId}`;\n    try {\n        const res = await fetch(url);\n        if (!res.ok) return [];\n        const json = await res.json();\n        return json.articles || [];\n    } catch  {\n        return [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU0sTUFBTUMsTUFBTUY7UUFDeEIsSUFBSSxDQUFDQyxJQUFJRSxFQUFFLEVBQUUsT0FBTyxFQUFFO1FBQ3RCLE1BQU1DLE9BQU8sTUFBTUgsSUFBSUcsSUFBSTtRQUMzQixPQUFRQSxLQUFLNkIsUUFBUSxJQUFJLEVBQUU7SUFDN0IsRUFBRSxPQUFNO1FBQ04sT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVPLGVBQWVDLGNBQWNoRixLQUFZLEVBQUVpRixNQUFjO0lBQzlELE1BQU1oRixPQUFPMkQsWUFBWTVEO0lBQ3pCLE1BQU04QyxNQUFNLENBQUMsRUFBRWhELFVBQVUsQ0FBQyxFQUFFRyxLQUFLLG1CQUFtQixFQUFFZ0YsT0FBTyxDQUFDO0lBRTlELElBQUk7UUFDRixNQUFNbEMsTUFBTSxNQUFNQyxNQUFNRjtRQUN4QixJQUFJLENBQUNDLElBQUlFLEVBQUUsRUFBRSxPQUFPLEVBQUU7UUFDdEIsTUFBTUMsT0FBTyxNQUFNSCxJQUFJRyxJQUFJO1FBQzNCLE9BQVFBLEtBQUs2QixRQUFRLElBQUksRUFBRTtJQUM3QixFQUFFLE9BQU07UUFDTixPQUFPLEVBQUU7SUFDWDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvcGlja3MvLi9zcmMvbGliL2VzcG4udHM/ZTYyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHYW1lLCBTcG9ydCwgVGVhbSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgdG9FU1BORGF0ZSB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgcmVhZEdhbWVDYWNoZSwgd3JpdGVHYW1lQ2FjaGUgfSBmcm9tICcuL3N0b3JhZ2UnO1xuXG5jb25zdCBFU1BOX0JBU0UgPSAnaHR0cHM6Ly9zaXRlLmFwaS5lc3BuLmNvbS9hcGlzL3NpdGUvdjIvc3BvcnRzJztcblxuY29uc3QgU1BPUlRfQ09ORklHUzogeyBzcG9ydDogU3BvcnQ7IHBhdGg6IHN0cmluZyB9W10gPSBbXG4gIHsgc3BvcnQ6ICduYmEnLCBwYXRoOiAnYmFza2V0YmFsbC9uYmEnIH0sXG4gIHsgc3BvcnQ6ICdtbGInLCBwYXRoOiAnYmFzZWJhbGwvbWxiJyB9LFxuICB7IHNwb3J0OiAnbmZsJywgcGF0aDogJ2Zvb3RiYWxsL25mbCcgfSxcbiAgeyBzcG9ydDogJ25obCcsIHBhdGg6ICdob2NrZXkvbmhsJyB9LFxuXTtcblxuaW50ZXJmYWNlIEVTUE5Db21wZXRpdG9yIHtcbiAgaG9tZUF3YXk6ICdob21lJyB8ICdhd2F5JztcbiAgdGVhbToge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gICAgYWJicmV2aWF0aW9uOiBzdHJpbmc7XG4gICAgbG9nbzogc3RyaW5nO1xuICB9O1xuICBzY29yZT86IHN0cmluZztcbiAgcmVjb3Jkcz86IEFycmF5PHsgc3VtbWFyeTogc3RyaW5nIH0+O1xufVxuXG5pbnRlcmZhY2UgRVNQTkV2ZW50IHtcbiAgaWQ6IHN0cmluZztcbiAgZGF0ZTogc3RyaW5nO1xuICBjb21wZXRpdGlvbnM6IEFycmF5PHtcbiAgICBjb21wZXRpdG9yczogRVNQTkNvbXBldGl0b3JbXTtcbiAgICBzdGF0dXM6IHtcbiAgICAgIHR5cGU6IHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBjb21wbGV0ZWQ6IGJvb2xlYW47XG4gICAgICB9O1xuICAgIH07XG4gIH0+O1xufVxuXG5mdW5jdGlvbiBwYXJzZVRlYW0oY29tcGV0aXRvcjogRVNQTkNvbXBldGl0b3IpOiBUZWFtIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogY29tcGV0aXRvci50ZWFtLmlkLFxuICAgIG5hbWU6IGNvbXBldGl0b3IudGVhbS5uYW1lLFxuICAgIGRpc3BsYXlOYW1lOiBjb21wZXRpdG9yLnRlYW0uZGlzcGxheU5hbWUsXG4gICAgYWJicmV2aWF0aW9uOiBjb21wZXRpdG9yLnRlYW0uYWJicmV2aWF0aW9uLFxuICAgIGxvZ286IGNvbXBldGl0b3IudGVhbS5sb2dvLFxuICAgIHJlY29yZDogY29tcGV0aXRvci5yZWNvcmRzPy5bMF0/LnN1bW1hcnkgfHwgJzAtMCcsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlU3RhdHVzKHN0YXR1czogRVNQTkV2ZW50Wydjb21wZXRpdGlvbnMnXVswXVsnc3RhdHVzJ10pOiBHYW1lWydzdGF0dXMnXSB7XG4gIGlmIChzdGF0dXMudHlwZS5jb21wbGV0ZWQpIHJldHVybiAnZmluYWwnO1xuICBpZiAoc3RhdHVzLnR5cGUubmFtZSA9PT0gJ1NUQVRVU19JTl9QUk9HUkVTUycpIHJldHVybiAnaW5fcHJvZ3Jlc3MnO1xuICByZXR1cm4gJ3NjaGVkdWxlZCc7XG59XG5cbmZ1bmN0aW9uIHBhcnNlR2FtZShldmVudDogRVNQTkV2ZW50LCBzcG9ydDogU3BvcnQpOiBHYW1lIHtcbiAgY29uc3QgY29tcCA9IGV2ZW50LmNvbXBldGl0aW9uc1swXTtcbiAgY29uc3QgaG9tZSA9IGNvbXAuY29tcGV0aXRvcnMuZmluZCgoYykgPT4gYy5ob21lQXdheSA9PT0gJ2hvbWUnKSE7XG4gIGNvbnN0IGF3YXkgPSBjb21wLmNvbXBldGl0b3JzLmZpbmQoKGMpID0+IGMuaG9tZUF3YXkgPT09ICdhd2F5JykhO1xuXG4gIHJldHVybiB7XG4gICAgaWQ6IGV2ZW50LmlkLFxuICAgIHNwb3J0LFxuICAgIGRhdGU6IGV2ZW50LmRhdGUuc3BsaXQoJ1QnKVswXSxcbiAgICBob21lVGVhbTogcGFyc2VUZWFtKGhvbWUpLFxuICAgIGF3YXlUZWFtOiBwYXJzZVRlYW0oYXdheSksXG4gICAgaG9tZVNjb3JlOiBob21lLnNjb3JlID8gcGFyc2VJbnQoaG9tZS5zY29yZSkgOiBudWxsLFxuICAgIGF3YXlTY29yZTogYXdheS5zY29yZSA/IHBhcnNlSW50KGF3YXkuc2NvcmUpIDogbnVsbCxcbiAgICBzdGF0dXM6IHBhcnNlU3RhdHVzKGNvbXAuc3RhdHVzKSxcbiAgICBzdGFydFRpbWU6IGV2ZW50LmRhdGUsXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoU3BvcnRHYW1lcyhzcG9ydDogU3BvcnQsIHBhdGg6IHN0cmluZywgZGF0ZTogc3RyaW5nKTogUHJvbWlzZTxHYW1lW10+IHtcbiAgY29uc3QgY2FjaGVLZXkgPSBgJHtzcG9ydH0tJHtkYXRlfWA7XG4gIGNvbnN0IGNhY2hlZCA9IHJlYWRHYW1lQ2FjaGUoY2FjaGVLZXkpO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgY29uc3QgeyBkYXRhLCBhZ2VNaW51dGVzIH0gPSBjYWNoZWQgYXMgeyBkYXRhOiBHYW1lW107IGFnZU1pbnV0ZXM6IG51bWJlciB9O1xuICAgIGNvbnN0IGFsbEZpbmFsID0gZGF0YS5sZW5ndGggPiAwICYmIGRhdGEuZXZlcnkoKGc6IEdhbWUpID0+IGcuc3RhdHVzID09PSAnZmluYWwnKTtcbiAgICBpZiAoYWxsRmluYWwgfHwgYWdlTWludXRlcyA8IDUpIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGVzcG5EYXRlID0gdG9FU1BORGF0ZShkYXRlKTtcbiAgY29uc3QgdXJsID0gYCR7RVNQTl9CQVNFfS8ke3BhdGh9L3Njb3JlYm9hcmQ/ZGF0ZXM9JHtlc3BuRGF0ZX1gO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgaWYgKGNhY2hlZCkgcmV0dXJuIChjYWNoZWQgYXMgeyBkYXRhOiBHYW1lW10gfSkuZGF0YTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBjb25zdCBldmVudHM6IEVTUE5FdmVudFtdID0ganNvbi5ldmVudHMgfHwgW107XG4gICAgY29uc3QgZ2FtZXMgPSBldmVudHMubWFwKChlKSA9PiBwYXJzZUdhbWUoZSwgc3BvcnQpKTtcblxuICAgIHdyaXRlR2FtZUNhY2hlKGNhY2hlS2V5LCBnYW1lcyk7XG4gICAgcmV0dXJuIGdhbWVzO1xuICB9IGNhdGNoIHtcbiAgICBpZiAoY2FjaGVkKSByZXR1cm4gKGNhY2hlZCBhcyB7IGRhdGE6IEdhbWVbXSB9KS5kYXRhO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hHYW1lcyhkYXRlOiBzdHJpbmcpOiBQcm9taXNlPEdhbWVbXT4ge1xuICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgU1BPUlRfQ09ORklHUy5tYXAoKHsgc3BvcnQsIHBhdGggfSkgPT4gZmV0Y2hTcG9ydEdhbWVzKHNwb3J0LCBwYXRoLCBkYXRlKSlcbiAgKTtcbiAgcmV0dXJuIHJlc3VsdHMuZmxhdCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RVNQTlBhdGgoc3BvcnQ6IFNwb3J0KTogc3RyaW5nIHtcbiAgcmV0dXJuIFNQT1JUX0NPTkZJR1MuZmluZCgoYykgPT4gYy5zcG9ydCA9PT0gc3BvcnQpIS5wYXRoO1xufVxuXG5leHBvcnQgeyBTUE9SVF9DT05GSUdTIH07XG5cbi8vIC0tLSBGZXRjaCBUZWFtcyBmb3IgYSBzcG9ydCAtLS1cblxuZXhwb3J0IGludGVyZmFjZSBFU1BOVGVhbUVudHJ5IHtcbiAgdGVhbToge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgICBhYmJyZXZpYXRpb246IHN0cmluZztcbiAgICBsb2dvcz86IEFycmF5PHsgaHJlZjogc3RyaW5nIH0+O1xuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hUZWFtcyhzcG9ydDogU3BvcnQpOiBQcm9taXNlPHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyBhYmJyZXZpYXRpb246IHN0cmluZzsgbG9nbzogc3RyaW5nOyBzcG9ydDogU3BvcnQgfVtdPiB7XG4gIGNvbnN0IGNmZyA9IFNQT1JUX0NPTkZJR1MuZmluZCgoYykgPT4gYy5zcG9ydCA9PT0gc3BvcnQpO1xuICBpZiAoIWNmZykgcmV0dXJuIFtdO1xuICBjb25zdCB1cmwgPSBgJHtFU1BOX0JBU0V9LyR7Y2ZnLnBhdGh9L3RlYW1zYDtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgIGlmICghcmVzLm9rKSByZXR1cm4gW107XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgY29uc3QgZW50cmllczogRVNQTlRlYW1FbnRyeVtdID0ganNvbi5zcG9ydHM/LlswXT8ubGVhZ3Vlcz8uWzBdPy50ZWFtcyB8fCBbXTtcbiAgICByZXR1cm4gZW50cmllcy5tYXAoKGUpID0+ICh7XG4gICAgICBpZDogZS50ZWFtLmlkLFxuICAgICAgbmFtZTogZS50ZWFtLmRpc3BsYXlOYW1lLFxuICAgICAgYWJicmV2aWF0aW9uOiBlLnRlYW0uYWJicmV2aWF0aW9uLFxuICAgICAgbG9nbzogZS50ZWFtLmxvZ29zPy5bMF0/LmhyZWYgfHwgJycsXG4gICAgICBzcG9ydCxcbiAgICB9KSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vLyAtLS0gR2FtZSBTdW1tYXJ5IChib3ggc2NvcmVzKSAtLS1cblxuaW50ZXJmYWNlIEVTUE5BdGhsZXRlU3RhdHMge1xuICBhdGhsZXRlOiB7IGRpc3BsYXlOYW1lOiBzdHJpbmc7IGlkOiBzdHJpbmc7IGhlYWRzaG90PzogeyBocmVmOiBzdHJpbmcgfSB9O1xuICBzdGF0czogc3RyaW5nW107XG59XG5cbmNvbnN0IFNQT1JUX0hFQURTSE9UX1BBVEhTOiBSZWNvcmQ8U3BvcnQsIHN0cmluZz4gPSB7XG4gIG5iYTogJ25iYS9wbGF5ZXJzJyxcbiAgbWxiOiAnbWxiL3BsYXllcnMnLFxuICBuZmw6ICduZmwvcGxheWVycycsXG4gIG5obDogJ25obC9wbGF5ZXJzJyxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQbGF5ZXJIZWFkc2hvdFVybChzcG9ydDogU3BvcnQsIGF0aGxldGVJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgcGF0aCA9IFNQT1JUX0hFQURTSE9UX1BBVEhTW3Nwb3J0XTtcbiAgcmV0dXJuIGBodHRwczovL2EuZXNwbmNkbi5jb20vaS9oZWFkc2hvdHMvJHtwYXRofS9mdWxsLyR7YXRobGV0ZUlkfS5wbmdgO1xufVxuXG5pbnRlcmZhY2UgRVNQTlBsYXllclN0YXRzIHtcbiAgdGVhbTogeyBhYmJyZXZpYXRpb246IHN0cmluZzsgbG9nbzogc3RyaW5nIH07XG4gIHN0YXRpc3RpY3M6IEFycmF5PHtcbiAgICBsYWJlbHM6IHN0cmluZ1tdO1xuICAgIGF0aGxldGVzOiBFU1BOQXRobGV0ZVN0YXRzW107XG4gIH0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVTUE5TdW1tYXJ5IHtcbiAgYm94c2NvcmU6IHtcbiAgICBwbGF5ZXJzOiBFU1BOUGxheWVyU3RhdHNbXTtcbiAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoR2FtZVN1bW1hcnkoc3BvcnQ6IFNwb3J0LCBnYW1lSWQ6IHN0cmluZyk6IFByb21pc2U8RVNQTlN1bW1hcnkgfCBudWxsPiB7XG4gIGNvbnN0IHBhdGggPSBnZXRFU1BOUGF0aChzcG9ydCk7XG4gIGNvbnN0IHVybCA9IGAke0VTUE5fQkFTRX0vJHtwYXRofS9zdW1tYXJ5P2V2ZW50PSR7Z2FtZUlkfWA7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgIGlmICghcmVzLm9rKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICByZXR1cm4ganNvbiBhcyBFU1BOU3VtbWFyeTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLy8gLS0tIFNwb3J0cyBOZXdzIC0tLVxuXG5leHBvcnQgaW50ZXJmYWNlIEVTUE5BcnRpY2xlIHtcbiAgaGVhZGxpbmU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcHVibGlzaGVkOiBzdHJpbmc7XG4gIGxpbmtzOiB7IHdlYjogeyBocmVmOiBzdHJpbmcgfSB9O1xuICBpbWFnZXM/OiBBcnJheTx7IHVybDogc3RyaW5nIH0+O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hTcG9ydE5ld3Moc3BvcnQ6IFNwb3J0KTogUHJvbWlzZTxFU1BOQXJ0aWNsZVtdPiB7XG4gIGNvbnN0IHBhdGggPSBnZXRFU1BOUGF0aChzcG9ydCk7XG4gIGNvbnN0IHVybCA9IGAke0VTUE5fQkFTRX0vJHtwYXRofS9uZXdzP2xpbWl0PTVgO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBpZiAoIXJlcy5vaykgcmV0dXJuIFtdO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIHJldHVybiAoanNvbi5hcnRpY2xlcyB8fCBbXSkgYXMgRVNQTkFydGljbGVbXTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFRlYW1OZXdzKHNwb3J0OiBTcG9ydCwgdGVhbUlkOiBzdHJpbmcpOiBQcm9taXNlPEVTUE5BcnRpY2xlW10+IHtcbiAgY29uc3QgcGF0aCA9IGdldEVTUE5QYXRoKHNwb3J0KTtcbiAgY29uc3QgdXJsID0gYCR7RVNQTl9CQVNFfS8ke3BhdGh9L25ld3M/bGltaXQ9NSZ0ZWFtPSR7dGVhbUlkfWA7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgIGlmICghcmVzLm9rKSByZXR1cm4gW107XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgcmV0dXJuIChqc29uLmFydGljbGVzIHx8IFtdKSBhcyBFU1BOQXJ0aWNsZVtdO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJ0b0VTUE5EYXRlIiwicmVhZEdhbWVDYWNoZSIsIndyaXRlR2FtZUNhY2hlIiwiRVNQTl9CQVNFIiwiU1BPUlRfQ09ORklHUyIsInNwb3J0IiwicGF0aCIsInBhcnNlVGVhbSIsImNvbXBldGl0b3IiLCJpZCIsInRlYW0iLCJuYW1lIiwiZGlzcGxheU5hbWUiLCJhYmJyZXZpYXRpb24iLCJsb2dvIiwicmVjb3JkIiwicmVjb3JkcyIsInN1bW1hcnkiLCJwYXJzZVN0YXR1cyIsInN0YXR1cyIsInR5cGUiLCJjb21wbGV0ZWQiLCJwYXJzZUdhbWUiLCJldmVudCIsImNvbXAiLCJjb21wZXRpdGlvbnMiLCJob21lIiwiY29tcGV0aXRvcnMiLCJmaW5kIiwiYyIsImhvbWVBd2F5IiwiYXdheSIsImRhdGUiLCJzcGxpdCIsImhvbWVUZWFtIiwiYXdheVRlYW0iLCJob21lU2NvcmUiLCJzY29yZSIsInBhcnNlSW50IiwiYXdheVNjb3JlIiwic3RhcnRUaW1lIiwiZmV0Y2hTcG9ydEdhbWVzIiwiY2FjaGVLZXkiLCJjYWNoZWQiLCJkYXRhIiwiYWdlTWludXRlcyIsImFsbEZpbmFsIiwibGVuZ3RoIiwiZXZlcnkiLCJnIiwiZXNwbkRhdGUiLCJ1cmwiLCJyZXMiLCJmZXRjaCIsIm9rIiwianNvbiIsImV2ZW50cyIsImdhbWVzIiwibWFwIiwiZSIsImZldGNoR2FtZXMiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsImZsYXQiLCJnZXRFU1BOUGF0aCIsImZldGNoVGVhbXMiLCJjZmciLCJlbnRyaWVzIiwic3BvcnRzIiwibGVhZ3VlcyIsInRlYW1zIiwibG9nb3MiLCJocmVmIiwiU1BPUlRfSEVBRFNIT1RfUEFUSFMiLCJuYmEiLCJtbGIiLCJuZmwiLCJuaGwiLCJnZXRQbGF5ZXJIZWFkc2hvdFVybCIsImF0aGxldGVJZCIsImZldGNoR2FtZVN1bW1hcnkiLCJnYW1lSWQiLCJmZXRjaFNwb3J0TmV3cyIsImFydGljbGVzIiwiZmV0Y2hUZWFtTmV3cyIsInRlYW1JZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/espn.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/storage.ts":
/*!****************************!*\
  !*** ./src/lib/storage.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPicks: () => (/* binding */ getPicks),\n/* harmony export */   getPicksByDate: () => (/* binding */ getPicksByDate),\n/* harmony export */   getPicksByUser: () => (/* binding */ getPicksByUser),\n/* harmony export */   getPicksByUserAndDate: () => (/* binding */ getPicksByUserAndDate),\n/* harmony export */   getUser: () => (/* binding */ getUser),\n/* harmony export */   getUsers: () => (/* binding */ getUsers),\n/* harmony export */   readGameCache: () => (/* binding */ readGameCache),\n/* harmony export */   readJSON: () => (/* binding */ readJSON),\n/* harmony export */   readMeta: () => (/* binding */ readMeta),\n/* harmony export */   savePicks: () => (/* binding */ savePicks),\n/* harmony export */   saveUsers: () => (/* binding */ saveUsers),\n/* harmony export */   upsertPick: () => (/* binding */ upsertPick),\n/* harmony export */   upsertUser: () => (/* binding */ upsertUser),\n/* harmony export */   writeGameCache: () => (/* binding */ writeGameCache),\n/* harmony export */   writeJSON: () => (/* binding */ writeJSON),\n/* harmony export */   writeMeta: () => (/* binding */ writeMeta)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst DATA_DIR = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"data\");\nconst CACHE_DIR = path__WEBPACK_IMPORTED_MODULE_1___default().join(DATA_DIR, \"games-cache\");\nfunction ensureDir(dir) {\n    if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dir)) {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(dir, {\n            recursive: true\n        });\n    }\n}\nfunction ensureFile(filePath, defaultContent = \"[]\") {\n    ensureDir(path__WEBPACK_IMPORTED_MODULE_1___default().dirname(filePath));\n    if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(filePath)) {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(filePath, defaultContent, \"utf-8\");\n    }\n}\nfunction readJSON(filePath, defaultValue) {\n    const fullPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(DATA_DIR, filePath);\n    ensureFile(fullPath, JSON.stringify(defaultValue));\n    try {\n        const raw = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(fullPath, \"utf-8\");\n        return JSON.parse(raw);\n    } catch  {\n        return defaultValue;\n    }\n}\nfunction writeJSON(filePath, data) {\n    const fullPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(DATA_DIR, filePath);\n    ensureFile(fullPath);\n    fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(fullPath, JSON.stringify(data, null, 2), \"utf-8\");\n}\nfunction readGameCache(date) {\n    ensureDir(CACHE_DIR);\n    const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(CACHE_DIR, `${date}.json`);\n    if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(filePath)) return null;\n    try {\n        const stat = fs__WEBPACK_IMPORTED_MODULE_0___default().statSync(filePath);\n        const raw = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(filePath, \"utf-8\");\n        const data = JSON.parse(raw);\n        const ageMinutes = (Date.now() - stat.mtimeMs) / 60000;\n        return {\n            data,\n            ageMinutes\n        };\n    } catch  {\n        return null;\n    }\n}\nfunction writeGameCache(date, data) {\n    ensureDir(CACHE_DIR);\n    const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(CACHE_DIR, `${date}.json`);\n    fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(filePath, JSON.stringify(data, null, 2), \"utf-8\");\n}\nfunction getUsers() {\n    return readJSON(\"users.json\", []);\n}\nfunction saveUsers(users) {\n    writeJSON(\"users.json\", users);\n}\nfunction getUser(username) {\n    const user = getUsers().find((u)=>u.username === username);\n    if (user) {\n        // Backfill new fields for existing users\n        if (!user.followedLeagues) user.followedLeagues = [];\n        if (!user.followedTeams) user.followedTeams = [];\n    }\n    return user;\n}\nfunction upsertUser(user) {\n    const users = getUsers();\n    const idx = users.findIndex((u)=>u.username === user.username);\n    if (idx >= 0) {\n        users[idx] = user;\n    } else {\n        users.push(user);\n    }\n    saveUsers(users);\n}\nfunction getPicks() {\n    return readJSON(\"picks.json\", []);\n}\nfunction savePicks(picks) {\n    writeJSON(\"picks.json\", picks);\n}\nfunction getPicksByDate(date) {\n    return getPicks().filter((p)=>p.date === date);\n}\nfunction getPicksByUser(username) {\n    return getPicks().filter((p)=>p.username === username);\n}\nfunction getPicksByUserAndDate(username, date) {\n    return getPicks().filter((p)=>p.username === username && p.date === date);\n}\nfunction upsertPick(pick) {\n    const picks = getPicks();\n    const idx = picks.findIndex((p)=>p.id === pick.id);\n    if (idx >= 0) {\n        picks[idx] = pick;\n    } else {\n        picks.push(pick);\n    }\n    savePicks(picks);\n}\nfunction readMeta() {\n    return readJSON(\"meta.json\", {});\n}\nfunction writeMeta(meta) {\n    writeJSON(\"meta.json\", meta);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUlPLE9BQU8sR0FBRztRQUNaVCxLQUFLLENBQUNTLElBQUksR0FBR047SUFDZixPQUFPO1FBQ0xILE1BQU1XLElBQUksQ0FBQ1I7SUFDYjtJQUNBSixVQUFVQztBQUNaO0FBRU8sU0FBU1k7SUFDZCxPQUFPakMsU0FBaUIsY0FBYyxFQUFFO0FBQzFDO0FBRU8sU0FBU2tDLFVBQVVDLEtBQWE7SUFDckMzQixVQUFVLGNBQWMyQjtBQUMxQjtBQUVPLFNBQVNDLGVBQWV6QixJQUFZO0lBQ3pDLE9BQU9zQixXQUFXSSxNQUFNLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRTNCLElBQUksS0FBS0E7QUFDN0M7QUFFTyxTQUFTNEIsZUFBZWhCLFFBQWdCO0lBQzdDLE9BQU9VLFdBQVdJLE1BQU0sQ0FBQyxDQUFDQyxJQUFNQSxFQUFFZixRQUFRLEtBQUtBO0FBQ2pEO0FBRU8sU0FBU2lCLHNCQUFzQmpCLFFBQWdCLEVBQUVaLElBQVk7SUFDbEUsT0FBT3NCLFdBQVdJLE1BQU0sQ0FBQyxDQUFDQyxJQUFNQSxFQUFFZixRQUFRLEtBQUtBLFlBQVllLEVBQUUzQixJQUFJLEtBQUtBO0FBQ3hFO0FBRU8sU0FBUzhCLFdBQVdDLElBQVU7SUFDbkMsTUFBTVAsUUFBUUY7SUFDZCxNQUFNSCxNQUFNSyxNQUFNSixTQUFTLENBQUMsQ0FBQ08sSUFBTUEsRUFBRUssRUFBRSxLQUFLRCxLQUFLQyxFQUFFO0lBQ25ELElBQUliLE9BQU8sR0FBRztRQUNaSyxLQUFLLENBQUNMLElBQUksR0FBR1k7SUFDZixPQUFPO1FBQ0xQLE1BQU1ILElBQUksQ0FBQ1U7SUFDYjtJQUNBUixVQUFVQztBQUNaO0FBRU8sU0FBU1M7SUFDZCxPQUFPNUMsU0FBa0MsYUFBYSxDQUFDO0FBQ3pEO0FBRU8sU0FBUzZDLFVBQVVDLElBQTZCO0lBQ3JEdEMsVUFBVSxhQUFhc0M7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9waWNrcy8uL3NyYy9saWIvc3RvcmFnZS50cz9hZmU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IFVzZXIsIFBpY2sgfSBmcm9tICcuL3R5cGVzJztcblxuY29uc3QgREFUQV9ESVIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnKTtcbmNvbnN0IENBQ0hFX0RJUiA9IHBhdGguam9pbihEQVRBX0RJUiwgJ2dhbWVzLWNhY2hlJyk7XG5cbmZ1bmN0aW9uIGVuc3VyZURpcihkaXI6IHN0cmluZykge1xuICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkge1xuICAgIGZzLm1rZGlyU3luYyhkaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuc3VyZUZpbGUoZmlsZVBhdGg6IHN0cmluZywgZGVmYXVsdENvbnRlbnQ6IHN0cmluZyA9ICdbXScpIHtcbiAgZW5zdXJlRGlyKHBhdGguZGlybmFtZShmaWxlUGF0aCkpO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKSB7XG4gICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgZGVmYXVsdENvbnRlbnQsICd1dGYtOCcpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkSlNPTjxUPihmaWxlUGF0aDogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IFQpOiBUIHtcbiAgY29uc3QgZnVsbFBhdGggPSBwYXRoLmpvaW4oREFUQV9ESVIsIGZpbGVQYXRoKTtcbiAgZW5zdXJlRmlsZShmdWxsUGF0aCwgSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFZhbHVlKSk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmF3ID0gZnMucmVhZEZpbGVTeW5jKGZ1bGxQYXRoLCAndXRmLTgnKTtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShyYXcpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3cml0ZUpTT048VD4oZmlsZVBhdGg6IHN0cmluZywgZGF0YTogVCk6IHZvaWQge1xuICBjb25zdCBmdWxsUGF0aCA9IHBhdGguam9pbihEQVRBX0RJUiwgZmlsZVBhdGgpO1xuICBlbnN1cmVGaWxlKGZ1bGxQYXRoKTtcbiAgZnMud3JpdGVGaWxlU3luYyhmdWxsUGF0aCwgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMiksICd1dGYtOCcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVhZEdhbWVDYWNoZShkYXRlOiBzdHJpbmcpOiB1bmtub3duIHwgbnVsbCB7XG4gIGVuc3VyZURpcihDQUNIRV9ESVIpO1xuICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihDQUNIRV9ESVIsIGAke2RhdGV9Lmpzb25gKTtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkgcmV0dXJuIG51bGw7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3RhdCA9IGZzLnN0YXRTeW5jKGZpbGVQYXRoKTtcbiAgICBjb25zdCByYXcgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGYtOCcpO1xuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJhdyk7XG4gICAgY29uc3QgYWdlTWludXRlcyA9IChEYXRlLm5vdygpIC0gc3RhdC5tdGltZU1zKSAvIDYwMDAwO1xuICAgIHJldHVybiB7IGRhdGEsIGFnZU1pbnV0ZXMgfTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdyaXRlR2FtZUNhY2hlKGRhdGU6IHN0cmluZywgZGF0YTogdW5rbm93bik6IHZvaWQge1xuICBlbnN1cmVEaXIoQ0FDSEVfRElSKTtcbiAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oQ0FDSEVfRElSLCBgJHtkYXRlfS5qc29uYCk7XG4gIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpLCAndXRmLTgnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJzKCk6IFVzZXJbXSB7XG4gIHJldHVybiByZWFkSlNPTjxVc2VyW10+KCd1c2Vycy5qc29uJywgW10pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVVzZXJzKHVzZXJzOiBVc2VyW10pOiB2b2lkIHtcbiAgd3JpdGVKU09OKCd1c2Vycy5qc29uJywgdXNlcnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlcih1c2VybmFtZTogc3RyaW5nKTogVXNlciB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHVzZXIgPSBnZXRVc2VycygpLmZpbmQoKHUpID0+IHUudXNlcm5hbWUgPT09IHVzZXJuYW1lKTtcbiAgaWYgKHVzZXIpIHtcbiAgICAvLyBCYWNrZmlsbCBuZXcgZmllbGRzIGZvciBleGlzdGluZyB1c2Vyc1xuICAgIGlmICghdXNlci5mb2xsb3dlZExlYWd1ZXMpIHVzZXIuZm9sbG93ZWRMZWFndWVzID0gW107XG4gICAgaWYgKCF1c2VyLmZvbGxvd2VkVGVhbXMpIHVzZXIuZm9sbG93ZWRUZWFtcyA9IFtdO1xuICB9XG4gIHJldHVybiB1c2VyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBzZXJ0VXNlcih1c2VyOiBVc2VyKTogdm9pZCB7XG4gIGNvbnN0IHVzZXJzID0gZ2V0VXNlcnMoKTtcbiAgY29uc3QgaWR4ID0gdXNlcnMuZmluZEluZGV4KCh1KSA9PiB1LnVzZXJuYW1lID09PSB1c2VyLnVzZXJuYW1lKTtcbiAgaWYgKGlkeCA+PSAwKSB7XG4gICAgdXNlcnNbaWR4XSA9IHVzZXI7XG4gIH0gZWxzZSB7XG4gICAgdXNlcnMucHVzaCh1c2VyKTtcbiAgfVxuICBzYXZlVXNlcnModXNlcnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGlja3MoKTogUGlja1tdIHtcbiAgcmV0dXJuIHJlYWRKU09OPFBpY2tbXT4oJ3BpY2tzLmpzb24nLCBbXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlUGlja3MocGlja3M6IFBpY2tbXSk6IHZvaWQge1xuICB3cml0ZUpTT04oJ3BpY2tzLmpzb24nLCBwaWNrcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQaWNrc0J5RGF0ZShkYXRlOiBzdHJpbmcpOiBQaWNrW10ge1xuICByZXR1cm4gZ2V0UGlja3MoKS5maWx0ZXIoKHApID0+IHAuZGF0ZSA9PT0gZGF0ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQaWNrc0J5VXNlcih1c2VybmFtZTogc3RyaW5nKTogUGlja1tdIHtcbiAgcmV0dXJuIGdldFBpY2tzKCkuZmlsdGVyKChwKSA9PiBwLnVzZXJuYW1lID09PSB1c2VybmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQaWNrc0J5VXNlckFuZERhdGUodXNlcm5hbWU6IHN0cmluZywgZGF0ZTogc3RyaW5nKTogUGlja1tdIHtcbiAgcmV0dXJuIGdldFBpY2tzKCkuZmlsdGVyKChwKSA9PiBwLnVzZXJuYW1lID09PSB1c2VybmFtZSAmJiBwLmRhdGUgPT09IGRhdGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBzZXJ0UGljayhwaWNrOiBQaWNrKTogdm9pZCB7XG4gIGNvbnN0IHBpY2tzID0gZ2V0UGlja3MoKTtcbiAgY29uc3QgaWR4ID0gcGlja3MuZmluZEluZGV4KChwKSA9PiBwLmlkID09PSBwaWNrLmlkKTtcbiAgaWYgKGlkeCA+PSAwKSB7XG4gICAgcGlja3NbaWR4XSA9IHBpY2s7XG4gIH0gZWxzZSB7XG4gICAgcGlja3MucHVzaChwaWNrKTtcbiAgfVxuICBzYXZlUGlja3MocGlja3MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVhZE1ldGEoKTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICByZXR1cm4gcmVhZEpTT048UmVjb3JkPHN0cmluZywgdW5rbm93bj4+KCdtZXRhLmpzb24nLCB7fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3cml0ZU1ldGEobWV0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiB2b2lkIHtcbiAgd3JpdGVKU09OKCdtZXRhLmpzb24nLCBtZXRhKTtcbn1cbiJdLCJuYW1lcyI6WyJmcyIsInBhdGgiLCJEQVRBX0RJUiIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiQ0FDSEVfRElSIiwiZW5zdXJlRGlyIiwiZGlyIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsImVuc3VyZUZpbGUiLCJmaWxlUGF0aCIsImRlZmF1bHRDb250ZW50IiwiZGlybmFtZSIsIndyaXRlRmlsZVN5bmMiLCJyZWFkSlNPTiIsImRlZmF1bHRWYWx1ZSIsImZ1bGxQYXRoIiwiSlNPTiIsInN0cmluZ2lmeSIsInJhdyIsInJlYWRGaWxlU3luYyIsInBhcnNlIiwid3JpdGVKU09OIiwiZGF0YSIsInJlYWRHYW1lQ2FjaGUiLCJkYXRlIiwic3RhdCIsInN0YXRTeW5jIiwiYWdlTWludXRlcyIsIkRhdGUiLCJub3ciLCJtdGltZU1zIiwid3JpdGVHYW1lQ2FjaGUiLCJnZXRVc2VycyIsInNhdmVVc2VycyIsInVzZXJzIiwiZ2V0VXNlciIsInVzZXJuYW1lIiwidXNlciIsImZpbmQiLCJ1IiwiZm9sbG93ZWRMZWFndWVzIiwiZm9sbG93ZWRUZWFtcyIsInVwc2VydFVzZXIiLCJpZHgiLCJmaW5kSW5kZXgiLCJwdXNoIiwiZ2V0UGlja3MiLCJzYXZlUGlja3MiLCJwaWNrcyIsImdldFBpY2tzQnlEYXRlIiwiZmlsdGVyIiwicCIsImdldFBpY2tzQnlVc2VyIiwiZ2V0UGlja3NCeVVzZXJBbmREYXRlIiwidXBzZXJ0UGljayIsInBpY2siLCJpZCIsInJlYWRNZXRhIiwid3JpdGVNZXRhIiwibWV0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/storage.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils.ts":
/*!**************************!*\
  !*** ./src/lib/utils.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addDays: () => (/* binding */ addDays),\n/* harmony export */   formatDate: () => (/* binding */ formatDate),\n/* harmony export */   formatTime: () => (/* binding */ formatTime),\n/* harmony export */   getWeekNumber: () => (/* binding */ getWeekNumber),\n/* harmony export */   parseRecord: () => (/* binding */ parseRecord),\n/* harmony export */   timeAgo: () => (/* binding */ timeAgo),\n/* harmony export */   toESPNDate: () => (/* binding */ toESPNDate),\n/* harmony export */   todayString: () => (/* binding */ todayString)\n/* harmony export */ });\nfunction todayString() {\n    return new Date().toISOString().split(\"T\")[0];\n}\nfunction toESPNDate(dateStr) {\n    return dateStr.replace(/-/g, \"\");\n}\nfunction formatTime(isoString) {\n    const date = new Date(isoString);\n    return date.toLocaleTimeString(\"en-US\", {\n        hour: \"numeric\",\n        minute: \"2-digit\",\n        timeZoneName: \"short\"\n    });\n}\nfunction getWeekNumber(date = new Date()) {\n    const start = new Date(date.getFullYear(), 0, 1);\n    const diff = date.getTime() - start.getTime();\n    const oneWeek = 604800000;\n    return Math.floor(diff / oneWeek) + 1;\n}\nfunction parseRecord(record) {\n    const parts = record.split(\"-\");\n    return {\n        wins: parseInt(parts[0]) || 0,\n        losses: parseInt(parts[1]) || 0\n    };\n}\nfunction formatDate(dateStr) {\n    const date = new Date(dateStr + \"T12:00:00\");\n    return date.toLocaleDateString(\"en-US\", {\n        weekday: \"short\",\n        month: \"short\",\n        day: \"numeric\"\n    });\n}\nfunction addDays(dateStr, days) {\n    const date = new Date(dateStr + \"T12:00:00\");\n    date.setDate(date.getDate() + days);\n    return date.toISOString().split(\"T\")[0];\n}\nfunction timeAgo(timestamp) {\n    const seconds = Math.floor((Date.now() - timestamp) / 1000);\n    if (seconds < 60) return \"just now\";\n    const minutes = Math.floor(seconds / 60);\n    if (minutes < 60) return `${minutes}m ago`;\n    const hours = Math.floor(minutes / 60);\n    if (hours < 24) return `${hours}h ago`;\n    const days = Math.floor(hours / 24);\n    return `${days}d ago`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3V0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQU8sU0FBU0E7SUFDZCxPQUFPLElBQUlDLE9BQU9DLFdBQVcsR0FBR0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQy9DO0FBRU8sU0FBU0MsV0FBV0MsT0FBZTtJQUN4QyxPQUFPQSxRQUFRQyxPQUFPLENBQUMsTUFBTTtBQUMvQjtBQUVPLFNBQVNDLFdBQVdDLFNBQWlCO0lBQzFDLE1BQU1DLE9BQU8sSUFBSVIsS0FBS087SUFDdEIsT0FBT0MsS0FBS0Msa0JBQWtCLENBQUMsU0FBUztRQUN0Q0MsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLGNBQWM7SUFDaEI7QUFDRjtBQUVPLFNBQVNDLGNBQWNMLE9BQWEsSUFBSVIsTUFBTTtJQUNuRCxNQUFNYyxRQUFRLElBQUlkLEtBQUtRLEtBQUtPLFdBQVcsSUFBSSxHQUFHO0lBQzlDLE1BQU1DLE9BQU9SLEtBQUtTLE9BQU8sS0FBS0gsTUFBTUcsT0FBTztJQUMzQyxNQUFNQyxVQUFVO0lBQ2hCLE9BQU9DLEtBQUtDLEtBQUssQ0FBQ0osT0FBT0UsV0FBVztBQUN0QztBQUVPLFNBQVNHLFlBQVlDLE1BQWM7SUFDeEMsTUFBTUMsUUFBUUQsT0FBT3BCLEtBQUssQ0FBQztJQUMzQixPQUFPO1FBQ0xzQixNQUFNQyxTQUFTRixLQUFLLENBQUMsRUFBRSxLQUFLO1FBQzVCRyxRQUFRRCxTQUFTRixLQUFLLENBQUMsRUFBRSxLQUFLO0lBQ2hDO0FBQ0Y7QUFFTyxTQUFTSSxXQUFXdkIsT0FBZTtJQUN4QyxNQUFNSSxPQUFPLElBQUlSLEtBQUtJLFVBQVU7SUFDaEMsT0FBT0ksS0FBS29CLGtCQUFrQixDQUFDLFNBQVM7UUFDdENDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7QUFDRjtBQUVPLFNBQVNDLFFBQVE1QixPQUFlLEVBQUU2QixJQUFZO0lBQ25ELE1BQU16QixPQUFPLElBQUlSLEtBQUtJLFVBQVU7SUFDaENJLEtBQUswQixPQUFPLENBQUMxQixLQUFLMkIsT0FBTyxLQUFLRjtJQUM5QixPQUFPekIsS0FBS1AsV0FBVyxHQUFHQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDekM7QUFFTyxTQUFTa0MsUUFBUUMsU0FBaUI7SUFDdkMsTUFBTUMsVUFBVW5CLEtBQUtDLEtBQUssQ0FBQyxDQUFDcEIsS0FBS3VDLEdBQUcsS0FBS0YsU0FBUSxJQUFLO0lBQ3RELElBQUlDLFVBQVUsSUFBSSxPQUFPO0lBQ3pCLE1BQU1FLFVBQVVyQixLQUFLQyxLQUFLLENBQUNrQixVQUFVO0lBQ3JDLElBQUlFLFVBQVUsSUFBSSxPQUFPLENBQUMsRUFBRUEsUUFBUSxLQUFLLENBQUM7SUFDMUMsTUFBTUMsUUFBUXRCLEtBQUtDLEtBQUssQ0FBQ29CLFVBQVU7SUFDbkMsSUFBSUMsUUFBUSxJQUFJLE9BQU8sQ0FBQyxFQUFFQSxNQUFNLEtBQUssQ0FBQztJQUN0QyxNQUFNUixPQUFPZCxLQUFLQyxLQUFLLENBQUNxQixRQUFRO0lBQ2hDLE9BQU8sQ0FBQyxFQUFFUixLQUFLLEtBQUssQ0FBQztBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb3BpY2tzLy4vc3JjL2xpYi91dGlscy50cz83YzFjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiB0b2RheVN0cmluZygpOiBzdHJpbmcge1xuICByZXR1cm4gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0VTUE5EYXRlKGRhdGVTdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBkYXRlU3RyLnJlcGxhY2UoLy0vZywgJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZShpc29TdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShpc29TdHJpbmcpO1xuICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLVVTJywge1xuICAgIGhvdXI6ICdudW1lcmljJyxcbiAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICB0aW1lWm9uZU5hbWU6ICdzaG9ydCcsXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2Vla051bWJlcihkYXRlOiBEYXRlID0gbmV3IERhdGUoKSk6IG51bWJlciB7XG4gIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCAxKTtcbiAgY29uc3QgZGlmZiA9IGRhdGUuZ2V0VGltZSgpIC0gc3RhcnQuZ2V0VGltZSgpO1xuICBjb25zdCBvbmVXZWVrID0gNjA0ODAwMDAwO1xuICByZXR1cm4gTWF0aC5mbG9vcihkaWZmIC8gb25lV2VlaykgKyAxO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZWNvcmQocmVjb3JkOiBzdHJpbmcpOiB7IHdpbnM6IG51bWJlcjsgbG9zc2VzOiBudW1iZXIgfSB7XG4gIGNvbnN0IHBhcnRzID0gcmVjb3JkLnNwbGl0KCctJyk7XG4gIHJldHVybiB7XG4gICAgd2luczogcGFyc2VJbnQocGFydHNbMF0pIHx8IDAsXG4gICAgbG9zc2VzOiBwYXJzZUludChwYXJ0c1sxXSkgfHwgMCxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZVN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIgKyAnVDEyOjAwOjAwJyk7XG4gIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7XG4gICAgd2Vla2RheTogJ3Nob3J0JyxcbiAgICBtb250aDogJ3Nob3J0JyxcbiAgICBkYXk6ICdudW1lcmljJyxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGREYXlzKGRhdGVTdHI6IHN0cmluZywgZGF5czogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIgKyAnVDEyOjAwOjAwJyk7XG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIGRheXMpO1xuICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lQWdvKHRpbWVzdGFtcDogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IoKERhdGUubm93KCkgLSB0aW1lc3RhbXApIC8gMTAwMCk7XG4gIGlmIChzZWNvbmRzIDwgNjApIHJldHVybiAnanVzdCBub3cnO1xuICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xuICBpZiAobWludXRlcyA8IDYwKSByZXR1cm4gYCR7bWludXRlc31tIGFnb2A7XG4gIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihtaW51dGVzIC8gNjApO1xuICBpZiAoaG91cnMgPCAyNCkgcmV0dXJuIGAke2hvdXJzfWggYWdvYDtcbiAgY29uc3QgZGF5cyA9IE1hdGguZmxvb3IoaG91cnMgLyAyNCk7XG4gIHJldHVybiBgJHtkYXlzfWQgYWdvYDtcbn1cbiJdLCJuYW1lcyI6WyJ0b2RheVN0cmluZyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwidG9FU1BORGF0ZSIsImRhdGVTdHIiLCJyZXBsYWNlIiwiZm9ybWF0VGltZSIsImlzb1N0cmluZyIsImRhdGUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJob3VyIiwibWludXRlIiwidGltZVpvbmVOYW1lIiwiZ2V0V2Vla051bWJlciIsInN0YXJ0IiwiZ2V0RnVsbFllYXIiLCJkaWZmIiwiZ2V0VGltZSIsIm9uZVdlZWsiLCJNYXRoIiwiZmxvb3IiLCJwYXJzZVJlY29yZCIsInJlY29yZCIsInBhcnRzIiwid2lucyIsInBhcnNlSW50IiwibG9zc2VzIiwiZm9ybWF0RGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIndlZWtkYXkiLCJtb250aCIsImRheSIsImFkZERheXMiLCJkYXlzIiwic2V0RGF0ZSIsImdldERhdGUiLCJ0aW1lQWdvIiwidGltZXN0YW1wIiwic2Vjb25kcyIsIm5vdyIsIm1pbnV0ZXMiLCJob3VycyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffeed%2Froute&page=%2Fapi%2Ffeed%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffeed%2Froute.ts&appDir=%2FUsers%2Fkrishpurewal%2FDocuments%2FCode%2FProPicks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkrishpurewal%2FDocuments%2FCode%2FProPicks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();